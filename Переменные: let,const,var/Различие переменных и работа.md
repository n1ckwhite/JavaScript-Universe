# Различия между `var`, `let` и `const`

JavaScript предоставляет три способа объявления переменных: `var`, `let` и `const`. Каждый из них отличается поведением, областью видимости, возможностью переопределения и поднятием (hoisting). Давайте разберем их детально с примерами.

---

## 1. **`var`**

### Особенности:
- **Область видимости**: Переменные, объявленные с помощью `var`, имеют **функциональную область видимости**. Если переменная объявлена внутри функции, она доступна только в этой функции. Если переменная объявлена вне функции, она становится глобальной.
- **Подъем (hoisting)**: Переменные `var` поднимаются в верхнюю часть своей области видимости и инициализируются значением `undefined`. Это позволяет обращаться к переменной до её фактического объявления.
- **Переопределение**: Переменные `var` можно переопределять в пределах одной области видимости.

#### Пример:

```javascript
function exampleVar() {
    console.log(a); // undefined (переменная поднимается, но значение не присвоено)
    var a = 10;
    console.log(a); // 10
}
exampleVar();

// Глобальная область
var b = 20;
console.log(b); // 20
```

---

## 2. **`let`**

### Особенности:
- **Область видимости**: Переменные, объявленные с помощью `let`, имеют **блочную область видимости**. Это значит, что переменная доступна только в пределах блока `{}`, в котором она объявлена.
- **Подъем (hoisting)**: Переменные `let` поднимаются, но находятся в **"временной мертвой зоне" (Temporal Dead Zone)** до момента их инициализации. Попытка доступа к переменной до её объявления вызывает ошибку `ReferenceError`.
- **Переопределение**: Переменные `let` можно переопределять, но нельзя объявлять повторно в одной области видимости.

#### Пример:

```javascript
function exampleLet() {
    // console.log(x); // ReferenceError: Cannot access 'x' before initialization
    let x = 10;
    console.log(x); // 10
}

if (true) {
    let y = 20;
    console.log(y); // 20
}
// console.log(y); // ReferenceError: y is not defined (блочная область)
```

---

## 3. **`const`**

### Особенности:
- **Область видимости**: Как и `let`, переменные `const` имеют **блочную область видимости**.
- **Подъем (hoisting)**: Переменные `const` поднимаются, но также находятся в **"временной мертвой зоне"**. Попытка использовать переменную до её объявления вызывает `ReferenceError`.
- **Изменяемость**: Переменная `const` должна быть инициализирована сразу при объявлении. После этого её значение нельзя изменить (переназначить). Однако, если переменная ссылается на объект или массив, их содержимое можно изменять.

#### Пример:

```javascript
const a = 30;
// a = 40; // TypeError: Assignment to constant variable.

const obj = { name: "Alice" };
obj.age = 25; // Допустимо, так как меняется содержимое объекта
console.log(obj); // { name: "Alice", age: 25 }

// obj = { name: "Bob" }; // TypeError: Assignment to constant variable.
```

---

# Область видимости (Scope)

### Область видимости определяет, где переменные могут быть доступны в коде:

| Ключевое слово | Область видимости | Подъем | Изменяемость |
|----------------|-------------------|--------|--------------|
| `var`          | Функциональная    | Да     | Да           |
| `let`          | Блочная           | Да     | Да           |
| `const`        | Блочная           | Да     | Нет          |

---

#### Пример сравнения

```javascript
function scopeComparison() {
    if (true) {
        var a = 10; // Доступна везде в функции
        let b = 20; // Доступна только внутри блока
        const c = 30; // Доступна только внутри блока
    }
    console.log(a); // 10
    // console.log(b); // ReferenceError: b is not defined
    // console.log(c); // ReferenceError: c is not defined
}
scopeComparison();
```

---

# Поведение при попытке переопределения

## Переопределение значений:

#### Для `var`:
```javascript
var x = 10;
x = 20; // Допустимо
console.log(x); // 20
```

#### Для `let`:
```javascript
let y = 10;
y = 20; // Допустимо
console.log(y); // 20
```

#### Для `const`:
```javascript
const z = 10;
// z = 20; // TypeError: Assignment to constant variable
console.log(z); // 10
```

---

## Изменение объектов:

#### Для `const` объектов:
```javascript
const obj = { name: "Alice" };
obj.name = "Bob"; // Допустимо, так как меняется содержимое объекта
console.log(obj); // { name: "Bob" }

// obj = { name: "Charlie" }; // TypeError: Assignment to constant variable
```

#### Заморозка объекта:
Чтобы предотвратить изменения, используйте `Object.freeze()`:
```javascript
const frozenObj = Object.freeze({ name: "Alice" });
frozenObj.name = "Bob"; // Игнорируется
console.log(frozenObj); // { name: "Alice" }
```

---

# Ошибки с `let` и `const`

#### Пример: "Временная мертвая зона"
```javascript
console.log(y); // ReferenceError: Cannot access 'y' before initialization
let y = 5;
```

### Объяснение:
1. **Подъем**: Переменная `y` поднимается, но она недоступна до момента инициализации.
2. **Ошибка**: Попытка обратиться к переменной до её объявления вызывает `ReferenceError`.

---

# Поведение внутри циклов

#### Пример:
```javascript
for (let i = 0; i < 3; i++) {
    console.log(i); // 0, 1, 2
}
// console.log(i); // ReferenceError: i is not defined
```

#### Для `const` в цикле:
```javascript
for (const j = 0; j < 3; j++) {
    console.log(j); // Ошибка: Invalid left-hand side in assignment
}
```

---

## Итог

- **Используйте `var`** только в старом коде или если вам нужна функциональная область видимости.
- **Используйте `let`** для переменных, которые изменяются в пределах блока.
- **Используйте `const`** для значений, которые не должны переназначаться, и объектов/массивов, где можно изменять только их содержимое.

---
