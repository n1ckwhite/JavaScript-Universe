# ‚ùì –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Node.js –∏ –æ—Ç–ª–∏—á–∏—è –æ—Ç PHP/Java

**Node.js** –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (PHP, Java) –∑–∞ —Å—á—ë—Ç —Å–≤–æ–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π, —Å–æ–±—ã—Ç–∏–π–Ω–æ‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏ –µ–¥–∏–Ω–æ–≥–æ —è–∑—ã–∫–∞ **JavaScript** –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ –±—ç–∫–µ–Ω–¥–µ.

---

## üîπ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Node.js

### üìå –ï–¥–∏–Ω—ã–π —è–∑—ã–∫ JavaScript
–û–¥–∏–Ω —Å—Ç–µ–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ —É–ø—Ä–æ—â–∞–µ—Ç –æ–±–º–µ–Ω –∑–Ω–∞–Ω–∏—è–º–∏, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç/—Ç–∏–ø–æ–≤ (TS) –∏ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

### üìå –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–û–ø–µ—Ä–∞—Ü–∏–∏ I/O –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ (—á–µ—Ä–µ–∑ –∫–æ–ª–±—ç–∫–∏/–ø—Ä–æ–º–∏—Å—ã), —á—Ç–æ –¥–∞—ë—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤.

### üìå –û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (—Å —É–º–æ–º)
–û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –æ–¥–∏–Ω, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é. –î–ª—è CPU‚Äë–∑–∞–¥–∞—á –¥–æ—Å—Ç—É–ø–Ω—ã `worker_threads`, `cluster` –∏–ª–∏ –≤—ã–Ω–æ—Å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.

### üìå –°–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª (Event Loop)
–£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á: macrotasks/microtasks/—Ç–∞–π–º–µ—Ä—ã/I/O callbacks, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

### üìå –ù–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤–≤–æ–¥‚Äë–≤—ã–≤–æ–¥ (Non‚Äëblocking I/O)
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–∂–∏–¥–∞–Ω–∏–µ–º –¥–∏—Å–∫–∞/—Å–µ—Ç–∏.

### üìå –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ npm
–ö—Ä—É–ø–Ω–µ–π—à–∏–π —Ä–µ–µ—Å—Ç—Ä –ø–∞–∫–µ—Ç–æ–≤: –≤–µ–±‚Äë—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, –ë–î, –æ—á–µ—Ä–µ–¥–∏, auth, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏/CLI.

### üìå –î–≤–∏–∂–æ–∫ Chrome V8
–í—ã–ø–æ–ª–Ω—è–µ—Ç JS —Å JIT‚Äë–∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥; –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞.

---

## üîπ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å PHP –∏ Java

### üìå PHP (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O, –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å/–≤–æ—Ä–∫–µ—Ä –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä–∞.
- –†–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –∏ –±—ç–∫–∞ ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç‚Äë—Å–≤–∏—Ç—á–∏–Ω–≥.
- –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, CMS, SSR –Ω–∞ —à–∞–±–ª–æ–Ω–∞—Ö.

### üìå Java (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π enterprise)
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å/–ø—É–ª –ø–æ—Ç–æ–∫–æ–≤, –±–æ–≥–∞—Ç—ã–µ JVM‚Äë–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è.
- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –æ–≤–µ—Ä—Ö–µ–¥ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –ø–∞–º—è—Ç—å—é.
- –°–∏–ª–µ–Ω –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–æ–º–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, heavy CPU, –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç—Ä–æ–≥–∏—Ö SLA.

### üìå –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | Node.js | PHP | Java |
|-------|---------|-----|------|
| –ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è | –û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–∞—è + Event Loop | –ü—Ä–æ—Ü–µ—Å—Å/–≤–æ—Ä–∫–µ—Ä –Ω–∞ –∑–∞–ø—Ä–æ—Å | –ü—É–ª –ø–æ—Ç–æ–∫–æ–≤ |
| I/O | –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—ã—á–Ω–æ –±–ª–æ–∫–∏—Ä—É—é—â–∏–π | –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —á–µ—Ä–µ–∑ NIO |
| Real‚Äëtime/WebSocket | –ù–∞—Ç–∏–≤–Ω–æ/—É–¥–æ–±–Ω–æ | –î–æ–ø. –ø–ª–∞–≥–∏–Ω—ã/—Å–µ—Ä–≤–µ—Ä—ã | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (Netty, Spring) |
| –Ø–∑—ã–∫ —Ñ—Ä–æ–Ω—Ç/–±—ç–∫ | –û–¥–∏–Ω (JS/TS) | –†–∞–∑–Ω—ã–µ | –†–∞–∑–Ω—ã–µ |
| CPU‚Äë—Ç—è–∂—ë–ª—ã–µ –∑–∞–¥–∞—á–∏ | –ù—É–∂–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã/–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã | –í–æ—Ä–∫–µ—Ä—ã/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è | –•–æ—Ä–æ—à–æ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ |
| –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ | npm (–æ–≥—Ä–æ–º–Ω–∞—è) | –ü–∞–∫–µ—Ç—ã/Composer | Maven/Gradle (–±–æ–≥–∞—Ç–∞—è) |
| –¢–∏–ø–∏—á–Ω–∞—è –Ω–∏—à–∞ | I/O‚Äë–Ω–∞–≥—Ä—É–∑–∫–∞, real‚Äëtime, API | CMS/SSR/–º–æ–Ω–æ–ª–∏—Ç—ã | Enterprise, —Å–ª–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω—ã |

---

## üîπ –ö–æ–≥–¥–∞ Node.js –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω

- –†–µ–∞–ª‚Äë—Ç–∞–π–º: —á–∞—Ç—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ç—Ä–µ–∫–∏–Ω–≥, —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ API –∏ gateway‚Äë—Å–ª–æ–π
- Streaming/–ø—Ä–æ–∫—Å–∏/–∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- Serverless/–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –≥–¥–µ –≤–∞–∂–Ω—ã —Å–∫–æ—Ä–æ—Å—Ç—å –¥–µ–ø–ª–æ—è –∏ —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç

---

## üéØ –ò—Ç–æ–≥

- Node.js —Å–∏–ª—ë–Ω —Ç–∞–º, –≥–¥–µ –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç I/O –∏ –≤–∞–∂–Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/real‚Äëtime.
- –ï–¥–∏–Ω—ã–π —è–∑—ã–∫ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∫–æ–º–∞–Ω–¥—ã.
- –î–ª—è CPU‚Äë–Ω–∞–≥—Ä—É–∑–æ–∫ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –≤–æ—Ä–∫–µ—Ä—ã/–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –∏–ª–∏ –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏: `—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O, Event Loop, npm`

---

### üìå –ó–∞–¥–∞—á–∞ 1: –í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø–æ–¥ —Å—Ü–µ–Ω–∞—Ä–∏–π
–ö–∞–∫—É—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é –≤—ã–±—Ä–∞—Ç—å –∏ –ø–æ—á–µ–º—É?
- –ê) –ß–∞—Ç —Å —Ç—ã—Å—è—á–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ë) –¢—è–∂—ë–ª–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å —Å —Å–ª–æ–∂–Ω—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏ CPU
- –í) –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è ERP —Å –∂—ë—Å—Ç–∫–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –∏ –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- –ì) –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–π —Å–∞–π—Ç/–±–ª–æ–≥ —Å SSR –∏ CMS

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

- –ê) Node.js (real‚Äëtime, WebSocket, I/O)
- –ë) Java (CPU‚Äëbound, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã JVM) –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞ Go/Rust + Node gateway
- –í) Java (–±–æ–≥–∞—Ç–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ enterprise, —Ç–∏–ø–∏–∑–∞—Ü–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- –ì) PHP (CMS‚Äë—ç–∫–æ—Å–∏—Å—Ç–µ–º–∞) –∏–ª–∏ Node.js (Next.js) ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∫–æ–¥ –Ω–∞ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π
–ï—Å—Ç—å —Å–µ—Ä–≤–µ—Ä, —á–∏—Ç–∞—é—â–∏–π —Ñ–∞–π–ª —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ `fs.readFileSync`. –ü–µ—Ä–µ–ø–∏—à–∏—Ç–µ –Ω–∞ –ø—Ä–æ–º–∏—Å—ã –∏ –≤–µ—Ä–Ω–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

–®–∞–≥–∏:
1) –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ
```bash
echo "hello from data" > data.txt
```

2) –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø—Ä–æ–º–∏—Å–∞—Ö
```javascript
// server.js (ESM)
import http from 'http';
import { readFile } from 'fs/promises';

const server = http.createServer(async (req, res) => {
  if (req.url === '/data') {
    try {
      const text = await readFile('data.txt', 'utf-8');
      res.writeHead(200, { 'Content-Type': 'text/plain; charset=utf-8' });
      return res.end(text);
    } catch (e) {
      res.writeHead(500, { 'Content-Type': 'application/json; charset=utf-8' });
      return res.end(JSON.stringify({ error: 'read error' }));
    }
  }
  res.writeHead(404).end();
});

server.listen(3000, () => console.log('http://localhost:3000'));
```

3) –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç—ã
```bash
node server.js
curl -s http://localhost:3000/data
curl -i http://localhost:3000/unknown
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –ü–æ—Ä—è–¥–æ–∫ Event Loop
–í—ã–≤–µ–¥–∏—Ç–µ –ø–æ—Ä—è–¥–æ–∫: `console.log`, `setTimeout(0)`, `Promise.resolve().then`, `setImmediate`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// order.js
console.log('sync');
setTimeout(() => console.log('timeout'), 0);
Promise.resolve().then(() => console.log('microtask'));
setImmediate(() => console.log('immediate'));
```

–ó–∞–ø—É—Å–∫:
```bash
node order.js | cat
```
–û–∂–∏–¥–∞–µ–º–æ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ): `sync ‚Üí microtask ‚Üí timeout/immediate` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ timeout/immediate –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–∑—ã —Ü–∏–∫–ª–∞ –∏ —Å—Ä–µ–¥—ã OS/Node).

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: –ú–∏–Ω–∏‚ÄëWebSocket —Å–µ—Ä–≤–µ—Ä
–ü–æ–¥–Ω–∏–º–∏—Ç–µ echo‚Äë—Å–µ—Ä–≤–µ—Ä –Ω–∞ `ws`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```bash
npm init -y
npm install ws
```

```javascript
// server-ws.js
import { WebSocketServer } from 'ws';

const wss = new WebSocketServer({ port: 8080 });
wss.on('connection', (ws) => {
  ws.on('message', (msg) => ws.send(`echo: ${msg}`));
});
```

–ú–∏–Ω–∏‚Äë–∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```javascript
// client-ws.js
import WebSocket from 'ws';

const ws = new WebSocket('ws://localhost:8080');
ws.on('open', () => ws.send('ping'));
ws.on('message', (data) => {
  console.log('recv:', data.toString());
  ws.close();
});
```

–ó–∞–ø—É—Å–∫:
```bash
node server-ws.js &
node client-ws.js
```
–û–∂–∏–¥–∞–µ–º–æ: –∫–ª–∏–µ–Ω—Ç —É–≤–∏–¥–∏—Ç `recv: echo: ping`.

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 5: –ü–æ–¥–±–æ—Ä npm‚Äë–ø–∞–∫–µ—Ç–æ–≤
–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –¥–æ—Å—Ç—É–ø–∞ –∫ Postgres, rate limiting. –û–±–æ—Å–Ω—É–π—Ç–µ –≤—ã–±–æ—Ä.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:

1) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî `pino`
```bash
npm i pino
```
```javascript
import pino from 'pino';
const logger = pino();
logger.info({ userId: 1 }, 'user logged in');
```

2) –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî `zod`
```bash
npm i zod
```
```javascript
import { z } from 'zod';
const User = z.object({ name: z.string(), age: z.number().int().min(0) });
const parsed = User.parse({ name: 'Nick', age: 20 });
```

3) Postgres ‚Äî `pg`
```bash
npm i pg
```
```javascript
import { Client } from 'pg';
const client = new Client({ connectionString: process.env.DATABASE_URL });
await client.connect();
const rows = (await client.query('select now()')).rows;
await client.end();
```

4) Rate limiting ‚Äî `rate-limiter-flexible`
```bash
npm i rate-limiter-flexible
```
```javascript
import http from 'http';
import { RateLimiterMemory } from 'rate-limiter-flexible';

const limiter = new RateLimiterMemory({ points: 5, duration: 1 });

http.createServer(async (req, res) => {
  try {
    await limiter.consume(req.socket.remoteAddress || 'anon');
    res.writeHead(200).end('ok');
  } catch {
    res.writeHead(429).end('Too Many Requests');
  }
}).listen(3009);
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 6: CPU‚Äë–Ω–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
–í—ã–Ω–µ—Å–∏—Ç–µ —Ç—è–∂—ë–ª—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ –≤–æ—Ä–∫–µ—Ä‚Äë–ø–æ—Ç–æ–∫, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π Event Loop.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// main.js
import { Worker } from 'node:worker_threads';

function runHeavy(input) {
  return new Promise((resolve, reject) => {
    const worker = new Worker(new URL('./worker.js', import.meta.url));
    worker.postMessage(input);
    worker.once('message', resolve);
    worker.once('error', reject);
  });
}

console.time('heavy');
runHeavy(42).then((r) => {
  console.timeEnd('heavy');
  console.log('result:', r);
});
```

```javascript
// worker.js
import { parentPort } from 'node:worker_threads';

parentPort.on('message', (n) => {
  // –∏–º–∏—Ç–∞—Ü–∏—è —Ç—è–∂—ë–ª–æ–π —Ä–∞–±–æ—Ç—ã
  let x = 0;
  for (let i = 0; i < 5e8; i++) x += i * n;
  parentPort.postMessage(x);
});
```

–ó–∞–ø—É—Å–∫:
```bash
node main.js
```
–û–∂–∏–¥–∞–µ–º–æ: —É–≤–∏–¥–∏—Ç–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —á–∏—Å–ª–æ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞.

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Node.js, –æ—Ç–ª–∏—á–∏–π –æ—Ç PHP/Java –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ Event Loop –∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ I/O.

---