# üìå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Node.js

**–í Node.js —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `child_process`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –≠—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–∞–Ω–¥, —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤.

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

### üìå 1. –ú–µ—Ç–æ–¥ `spawn`
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ –Ω–æ–≤–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ —É–¥–æ–±–Ω—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

```javascript
const { spawn } = require('child_process');

// –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã `ls` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
const ls = spawn('ls', ['-lh']);

ls.stdout.on('data', (data) => {
    console.log(`–í—ã–≤–æ–¥: ${data}`);
});

ls.stderr.on('data', (data) => {
    console.error(`–û—à–∏–±–∫–∞: ${data}`);
});

ls.on('close', (code) => {
    console.log(`–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º: ${code}`);
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞

### üìå 2. –ú–µ—Ç–æ–¥ `exec`
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –≤ –æ–±–æ–ª–æ—á–∫–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±—É—Ñ–µ—Ä —Å–æ –≤—Å–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.

```javascript
const { exec } = require('child_process');

exec('ls -lh', (error, stdout, stderr) => {
    if (error) {
        console.error(`–û—à–∏–±–∫–∞: ${error.message}`);
        return;
    }
    console.log(`–í—ã–≤–æ–¥: ${stdout}`);
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã, –≥–¥–µ –≤–∞–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üìå 3. –ú–µ—Ç–æ–¥ `execFile`
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é, –º–∏–Ω—É—è –æ–±–æ–ª–æ—á–∫—É. –ü–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

```javascript
const { execFile } = require('child_process');

execFile('node', ['-v'], (error, stdout, stderr) => {
    if (error) {
        console.error(`–û—à–∏–±–∫–∞: ${error.message}`);
        return;
    }
    console.log(`–í—ã–≤–æ–¥: ${stdout}`);
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–π–ª (—Å–∫—Ä–∏–ø—Ç, –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª)
- –ö–æ–≥–¥–∞ –≤–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∑–∞—â–∏—â—ë–Ω

### üìå 4. –ú–µ—Ç–æ–¥ `fork`
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç Node.js —Å–∫—Ä–∏–ø—Ç.

```javascript
const { fork } = require('child_process');

// –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å
const child = fork('child.js');
child.send({ greeting: '–ü—Ä–∏–≤–µ—Ç!' });
child.on('message', (message) => {
    console.log('–û—Ç–≤–µ—Ç:', message);
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º Node.js –ø—Ä–æ—Ü–µ—Å—Å–µ
- –î–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

---

## üîπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

### üìå –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
```javascript
// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
process.exit(code);

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
child.kill([signal]);
```

### üìå –ü–æ—Ç–æ–∫–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞
–î–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–º–µ—é—Ç —Ç—Ä–∏ –ø–æ—Ç–æ–∫–∞:
- **`child.stdin`** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥
- **`child.stdout`** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥  
- **`child.stderr`** ‚Äî –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫

```javascript
const { spawn } = require('child_process');
const child = spawn('node');

// –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ stdin
child.stdin.write('console.log("–ü—Ä–∏–≤–µ—Ç!");\n');
child.stdin.end();

// –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ stdout
child.stdout.on('data', (data) => {
    console.log(`–í—ã–≤–æ–¥: ${data}`);
});
```

---

## üîπ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### üìå –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** ‚Äî –¥–æ–±–∞–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `error`, `exit`, `close`
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –º–µ—Ç–æ–¥—ã** ‚Äî `exec` –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á, `spawn` –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤, `fork` –¥–ª—è Node.js —Å–∫—Ä–∏–ø—Ç–æ–≤
- **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø** ‚Äî –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∏—Å–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

### üìå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```javascript
const { spawn } = require('child_process');

const child = spawn('some-command');

child.on('error', (error) => {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞:', error);
});

child.on('exit', (code, signal) => {
    console.log(`–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º ${code} –∏ —Å–∏–≥–Ω–∞–ª–æ–º ${signal}`);
});
```

---

## üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### üìå –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
```javascript
const { exec } = require('child_process');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ
exec('uname -a', (error, stdout, stderr) => {
    if (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        return;
    }
    console.log('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ:', stdout);
});
```

### üìå –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
```javascript
const { spawn } = require('child_process');
const fs = require('fs');

// –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
const tar = spawn('tar', ['-czf', 'archive.tar.gz', 'folder/']);

tar.on('close', (code) => {
    if (code === 0) {
        console.log('–ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ');
    } else {
        console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞');
    }
});
```

### üìå –û–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
```javascript
// –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å
const { fork } = require('child_process');
const child = fork('./worker.js');

child.send({ task: 'calculate', data: [1, 2, 3, 4, 5] });

child.on('message', (result) => {
    console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', result);
});

// –î–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å (worker.js)
process.on('message', (message) => {
    if (message.task === 'calculate') {
        const sum = message.data.reduce((a, b) => a + b, 0);
        process.send({ result: sum });
    }
});
```

---

## üéØ –ò—Ç–æ–≥

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Node.js** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–∏–π –∏ –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞ —Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- –í—ã–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –∑–∞–¥–∞—á–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üèÜ –ó–ê–î–ê–ß–ò

–í–æ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å `—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Node.js`:

---

### üìå –ó–∞–¥–∞—á–∞ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

‚ùì –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:
- –ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å ProcessManager:
// startProcess(name, command, args) - –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
// stopProcess(name) - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
// getProcessStatus(name) - –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞
// restartProcess(name) - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
// const pm = new ProcessManager();
// pm.startProcess('worker', 'node', ['worker.js']);
// pm.stopProcess('worker');
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const { spawn } = require('child_process');
const EventEmitter = require('events');

class ProcessManager extends EventEmitter {
    constructor() {
        super();
        this.processes = new Map();
        this.restartAttempts = new Map();
        this.maxRestartAttempts = 3;
    }

    // –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞
    startProcess(name, command, args = [], options = {}) {
        if (this.processes.has(name)) {
            throw new Error(`–ü—Ä–æ—Ü–µ—Å—Å ${name} —É–∂–µ –∑–∞–ø—É—â–µ–Ω`);
        }

        const processOptions = {
            stdio: 'pipe',
            ...options
        };

        const child = spawn(command, args, processOptions);
        
        const processInfo = {
            name,
            command,
            args,
            process: child,
            startTime: Date.now(),
            restartCount: 0,
            status: 'running'
        };

        this.processes.set(name, processInfo);
        this.restartAttempts.set(name, 0);

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ—Ü–µ—Å—Å–∞
        child.on('error', (error) => {
            console.error(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ ${name}:`, error.message);
            this.emit('processError', { name, error });
            this.handleProcessError(name);
        });

        child.on('exit', (code, signal) => {
            console.log(`üîÑ –ü—Ä–æ—Ü–µ—Å—Å ${name} –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º ${code}`);
            this.emit('processExit', { name, code, signal });
            this.handleProcessExit(name, code);
        });

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
        if (child.stdout) {
            child.stdout.on('data', (data) => {
                console.log(`üìù [${name}] ${data.toString().trim()}`);
                this.emit('processOutput', { name, type: 'stdout', data: data.toString() });
            });
        }

        if (child.stderr) {
            child.stderr.on('data', (data) => {
                console.error(`‚ö†Ô∏è  [${name}] ${data.toString().trim()}`);
                this.emit('processOutput', { name, type: 'stderr', data: data.toString() });
            });
        }

        console.log(`‚úÖ –ü—Ä–æ—Ü–µ—Å—Å ${name} –∑–∞–ø—É—â–µ–Ω (PID: ${child.pid})`);
        this.emit('processStarted', { name, pid: child.pid });
        
        return child;
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
    stopProcess(name, signal = 'SIGTERM') {
        const processInfo = this.processes.get(name);
        
        if (!processInfo) {
            throw new Error(`–ü—Ä–æ—Ü–µ—Å—Å ${name} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
        }

        if (processInfo.status !== 'running') {
            console.log(`‚ö†Ô∏è  –ü—Ä–æ—Ü–µ—Å—Å ${name} —É–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`);
            return;
        }

        processInfo.status = 'stopping';
        processInfo.process.kill(signal);
        
        console.log(`üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ ${name}...`);
        this.emit('processStopping', { name });
    }

    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
    forceStopProcess(name) {
        const processInfo = this.processes.get(name);
        
        if (!processInfo) {
            throw new Error(`–ü—Ä–æ—Ü–µ—Å—Å ${name} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
        }

        processInfo.status = 'killed';
        processInfo.process.kill('SIGKILL');
        
        console.log(`üíÄ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ ${name}`);
        this.emit('processKilled', { name });
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
    getProcessStatus(name) {
        const processInfo = this.processes.get(name);
        
        if (!processInfo) {
            return { status: 'not_found' };
        }

        const uptime = Date.now() - processInfo.startTime;
        
        return {
            name: processInfo.name,
            status: processInfo.status,
            pid: processInfo.process.pid,
            uptime: Math.floor(uptime / 1000), // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
            restartCount: processInfo.restartCount,
            command: `${processInfo.command} ${processInfo.args.join(' ')}`
        };
    }

    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞
    restartProcess(name) {
        const processInfo = this.processes.get(name);
        
        if (!processInfo) {
            throw new Error(`–ü—Ä–æ—Ü–µ—Å—Å ${name} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
        }

        console.log(`üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ ${name}...`);
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
        this.stopProcess(name);
        
        // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∑–∞–Ω–æ–≤–æ
        setTimeout(() => {
            this.startProcess(
                processInfo.name, 
                processInfo.command, 
                processInfo.args
            );
        }, 1000);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
    handleProcessError(name) {
        const processInfo = this.processes.get(name);
        if (!processInfo) return;

        processInfo.status = 'error';
        this.attemptRestart(name);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
    handleProcessExit(name, code) {
        const processInfo = this.processes.get(name);
        if (!processInfo) return;

        processInfo.status = 'exited';
        
        if (code !== 0) {
            this.attemptRestart(name);
        } else {
            this.processes.delete(name);
            this.restartAttempts.delete(name);
        }
    }

    // –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
    attemptRestart(name) {
        const attempts = this.restartAttempts.get(name) || 0;
        
        if (attempts < this.maxRestartAttempts) {
            this.restartAttempts.set(name, attempts + 1);
            console.log(`üîÑ –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ${name} (${attempts + 1}/${this.maxRestartAttempts})`);
            
            setTimeout(() => {
                this.restartProcess(name);
            }, 2000 * (attempts + 1)); // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É
        } else {
            console.error(`‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–ª—è ${name}`);
            this.processes.delete(name);
            this.restartAttempts.delete(name);
            this.emit('processFailed', { name });
        }
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    getAllProcesses() {
        const processes = [];
        
        for (const [name, processInfo] of this.processes) {
            processes.push(this.getProcessStatus(name));
        }
        
        return processes;
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    stopAllProcesses() {
        console.log('üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤...');
        
        for (const [name] of this.processes) {
            this.stopProcess(name);
        }
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    getStats() {
        const processes = this.getAllProcesses();
        const running = processes.filter(p => p.status === 'running').length;
        const stopped = processes.filter(p => p.status === 'stopped').length;
        const errors = processes.filter(p => p.status === 'error').length;
        
        return {
            total: processes.length,
            running,
            stopped,
            errors,
            processes
        };
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const pm = new ProcessManager();

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
pm.on('processStarted', ({ name, pid }) => {
    console.log(`üéâ –ü—Ä–æ—Ü–µ—Å—Å ${name} –∑–∞–ø—É—â–µ–Ω —Å PID ${pid}`);
});

pm.on('processError', ({ name, error }) => {
    console.error(`üí• –û—à–∏–±–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ ${name}:`, error.message);
});

pm.on('processFailed', ({ name }) => {
    console.error(`üíÄ –ü—Ä–æ—Ü–µ—Å—Å ${name} –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å`);
});

// –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
try {
    pm.startProcess('worker1', 'node', ['-e', 'console.log("Worker 1 —Ä–∞–±–æ—Ç–∞–µ—Ç"); setInterval(() => {}, 1000);']);
    pm.startProcess('worker2', 'node', ['-e', 'console.log("Worker 2 —Ä–∞–±–æ—Ç–∞–µ—Ç"); setTimeout(() => process.exit(1), 5000);']);
} catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞:', error.message);
}

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
setInterval(() => {
    console.log('\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:');
    console.log(pm.getStats());
}, 10000);

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
setTimeout(() => {
    console.log('\nüõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤...');
    pm.stopAllProcesses();
}, 30000);

module.exports = ProcessManager;
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ —Å –æ—á–µ—Ä–µ–¥—å—é

‚ùì –°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ —Å –æ—á–µ—Ä–µ–¥—å—é:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ –æ—á–µ—Ä–µ–¥—å
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫
- –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å CommandQueue:
// addCommand(command, args, options) - –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ –æ—á–µ—Ä–µ–¥—å
// start() - –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—á–µ—Ä–µ–¥–∏
// stop() - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
// getQueueStatus() - –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
// const queue = new CommandQueue({ maxConcurrent: 2 });
// queue.addCommand('ls', ['-la']);
// queue.addCommand('node', ['-v']);
// queue.start();
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const { spawn } = require('child_process');
const EventEmitter = require('events');

class CommandQueue extends EventEmitter {
    constructor(options = {}) {
        super();
        this.queue = [];
        this.running = new Map();
        this.maxConcurrent = options.maxConcurrent || 3;
        this.isProcessing = false;
        this.completed = [];
        this.failed = [];
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ—á–µ—Ä–µ–¥—å
    addCommand(command, args = [], options = {}) {
        const commandId = this.generateCommandId();
        
        const commandItem = {
            id: commandId,
            command,
            args,
            options: {
                timeout: 30000, // 30 —Å–µ–∫—É–Ω–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                ...options
            },
            status: 'pending',
            createdAt: Date.now(),
            startedAt: null,
            completedAt: null,
            result: null,
            error: null
        };

        this.queue.push(commandItem);
        console.log(`üìù –ö–æ–º–∞–Ω–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å: ${command} ${args.join(' ')}`);
        
        this.emit('commandAdded', commandItem);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞
        if (!this.isProcessing) {
            this.start();
        }
        
        return commandId;
    }

    // –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏
    start() {
        if (this.isProcessing) {
            console.log('‚ö†Ô∏è  –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞');
            return;
        }

        this.isProcessing = true;
        console.log('üöÄ –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏ –∫–æ–º–∞–Ω–¥');
        this.emit('queueStarted');
        
        this.processQueue();
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏
    stop() {
        this.isProcessing = false;
        console.log('‚èπÔ∏è  –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏');
        this.emit('queueStopped');
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏
    async processQueue() {
        while (this.isProcessing && (this.queue.length > 0 || this.running.size > 0)) {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã
            while (this.running.size < this.maxConcurrent && this.queue.length > 0) {
                const commandItem = this.queue.shift();
                this.executeCommand(commandItem);
            }

            // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
            await this.waitForCompletion();
        }

        if (this.queue.length === 0 && this.running.size === 0) {
            console.log('‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã');
            this.emit('queueCompleted');
        }
    }

    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
    executeCommand(commandItem) {
        commandItem.status = 'running';
        commandItem.startedAt = Date.now();
        
        console.log(`‚ñ∂Ô∏è  –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: ${commandItem.command} ${commandItem.args.join(' ')}`);
        
        const child = spawn(commandItem.command, commandItem.args, {
            stdio: 'pipe',
            ...commandItem.options
        });

        this.running.set(commandItem.id, { commandItem, child });

        // –¢–∞–π–º–∞—É—Ç
        const timeout = setTimeout(() => {
            console.log(`‚è∞ –¢–∞–π–º–∞—É—Ç –∫–æ–º–∞–Ω–¥—ã ${commandItem.id}`);
            child.kill('SIGKILL');
            this.handleCommandError(commandItem, new Error('–¢–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã'));
        }, commandItem.options.timeout);

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–≤–æ–¥–∞
        let stdout = '';
        let stderr = '';

        if (child.stdout) {
            child.stdout.on('data', (data) => {
                stdout += data.toString();
                this.emit('commandOutput', {
                    commandId: commandItem.id,
                    type: 'stdout',
                    data: data.toString()
                });
            });
        }

        if (child.stderr) {
            child.stderr.on('data', (data) => {
                stderr += data.toString();
                this.emit('commandOutput', {
                    commandId: commandItem.id,
                    type: 'stderr',
                    data: data.toString()
                });
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
        child.on('close', (code, signal) => {
            clearTimeout(timeout);
            this.running.delete(commandItem.id);
            
            if (code === 0) {
                this.handleCommandSuccess(commandItem, stdout, stderr);
            } else {
                this.handleCommandError(commandItem, new Error(`–ö–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –∫–æ–¥–æ–º ${code}`));
            }
        });

        child.on('error', (error) => {
            clearTimeout(timeout);
            this.running.delete(commandItem.id);
            this.handleCommandError(commandItem, error);
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    handleCommandSuccess(commandItem, stdout, stderr) {
        commandItem.status = 'completed';
        commandItem.completedAt = Date.now();
        commandItem.result = { stdout, stderr };
        
        const duration = commandItem.completedAt - commandItem.startedAt;
        
        console.log(`‚úÖ –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞ ${duration}ms: ${commandItem.command}`);
        
        this.completed.push(commandItem);
        this.emit('commandCompleted', commandItem);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    handleCommandError(commandItem, error) {
        commandItem.status = 'failed';
        commandItem.completedAt = Date.now();
        commandItem.error = error.message;
        
        const duration = commandItem.completedAt - commandItem.startedAt;
        
        console.error(`‚ùå –ö–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π –∑–∞ ${duration}ms: ${commandItem.command} - ${error.message}`);
        
        this.failed.push(commandItem);
        this.emit('commandFailed', { commandItem, error });
    }

    // –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
    waitForCompletion() {
        return new Promise((resolve) => {
            if (this.running.size === 0) {
                resolve();
                return;
            }

            const checkInterval = setInterval(() => {
                if (this.running.size === 0) {
                    clearInterval(checkInterval);
                    resolve();
                }
            }, 100);
        });
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ—á–µ—Ä–µ–¥–∏
    getQueueStatus() {
        return {
            isProcessing: this.isProcessing,
            queueLength: this.queue.length,
            runningCount: this.running.size,
            completedCount: this.completed.length,
            failedCount: this.failed.length,
            totalProcessed: this.completed.length + this.failed.length,
            pending: this.queue.map(cmd => ({
                id: cmd.id,
                command: cmd.command,
                args: cmd.args,
                createdAt: cmd.createdAt
            })),
            running: Array.from(this.running.values()).map(({ commandItem }) => ({
                id: commandItem.id,
                command: commandItem.command,
                args: commandItem.args,
                startedAt: commandItem.startedAt
            }))
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    getStats() {
        const allCommands = [...this.completed, ...this.failed];
        const totalTime = allCommands.reduce((sum, cmd) => {
            if (cmd.startedAt && cmd.completedAt) {
                return sum + (cmd.completedAt - cmd.startedAt);
            }
            return sum;
        }, 0);

        return {
            total: allCommands.length,
            completed: this.completed.length,
            failed: this.failed.length,
            successRate: allCommands.length > 0 ? (this.completed.length / allCommands.length * 100).toFixed(2) : 0,
            averageTime: allCommands.length > 0 ? Math.round(totalTime / allCommands.length) : 0,
            maxConcurrent: this.maxConcurrent
        };
    }

    // –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
    clearCompleted() {
        this.completed = [];
        this.failed = [];
        console.log('üßπ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—â–µ–Ω—ã');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –∫–æ–º–∞–Ω–¥—ã
    generateCommandId() {
        return `cmd_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const queue = new CommandQueue({ maxConcurrent: 2 });

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
queue.on('commandCompleted', (commandItem) => {
    console.log(`üéâ –ö–æ–º–∞–Ω–¥–∞ ${commandItem.id} –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ`);
});

queue.on('commandFailed', ({ commandItem, error }) => {
    console.error(`üí• –ö–æ–º–∞–Ω–¥–∞ ${commandItem.id} –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π: ${error.message}`);
});

queue.on('queueCompleted', () => {
    console.log('üèÅ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã');
    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:', queue.getStats());
});

// –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—ã –≤ –æ—á–µ—Ä–µ–¥—å
queue.addCommand('node', ['-v']);
queue.addCommand('ls', ['-la']);
queue.addCommand('echo', ['Hello World']);
queue.addCommand('node', ['-e', 'console.log("–¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞")']);
queue.addCommand('nonexistent-command', []); // –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞
setInterval(() => {
    console.log('\nüìä –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏:');
    console.log(queue.getQueueStatus());
}, 5000);

module.exports = CommandQueue;
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

‚ùì –°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∏ –¥–æ—á–µ—Ä–Ω–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –≤–æ—Ä–∫–µ—Ä–∞–º
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç –≤–æ—Ä–∫–µ—Ä–æ–≤
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å ProcessPool:
// createWorker() - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞
// sendTask(task) - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤–æ—Ä–∫–µ—Ä—É
// getResults() - –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
// getPoolStatus() - –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—É–ª–∞

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
// const pool = new ProcessPool({ maxWorkers: 3 });
// pool.sendTask({ type: 'calculate', data: [1, 2, 3, 4, 5] });
// pool.sendTask({ type: 'process', data: 'Hello World' });
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const { fork } = require('child_process');
const path = require('path');
const EventEmitter = require('events');

class ProcessPool extends EventEmitter {
    constructor(options = {}) {
        super();
        this.maxWorkers = options.maxWorkers || 3;
        this.workers = new Map();
        this.taskQueue = [];
        this.results = new Map();
        this.taskId = 0;
        this.workerScript = options.workerScript || path.join(__dirname, 'worker.js');
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞
    createWorker() {
        const workerId = this.generateWorkerId();
        
        try {
            const worker = fork(this.workerScript);
            
            const workerInfo = {
                id: workerId,
                process: worker,
                status: 'idle',
                currentTask: null,
                tasksCompleted: 0,
                createdAt: Date.now()
            };

            this.workers.set(workerId, workerInfo);

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –≤–æ—Ä–∫–µ—Ä–∞
            worker.on('message', (message) => {
                this.handleWorkerMessage(workerId, message);
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ—Ä–∫–µ—Ä–∞
            worker.on('exit', (code, signal) => {
                console.log(`üîÑ –í–æ—Ä–∫–µ—Ä ${workerId} –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º ${code}`);
                this.handleWorkerExit(workerId, code, signal);
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ—Ä–∫–µ—Ä–∞
            worker.on('error', (error) => {
                console.error(`‚ùå –û—à–∏–±–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞ ${workerId}:`, error.message);
                this.handleWorkerError(workerId, error);
            });

            console.log(`‚úÖ –í–æ—Ä–∫–µ—Ä ${workerId} —Å–æ–∑–¥–∞–Ω (PID: ${worker.pid})`);
            this.emit('workerCreated', { workerId, pid: worker.pid });
            
            return workerId;
        } catch (error) {
            console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤–æ—Ä–∫–µ—Ä–∞:`, error.message);
            throw error;
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤
    initialize() {
        console.log(`üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ –∏–∑ ${this.maxWorkers} –≤–æ—Ä–∫–µ—Ä–æ–≤`);
        
        for (let i = 0; i < this.maxWorkers; i++) {
            try {
                this.createWorker();
            } catch (error) {
                console.error(`‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≤–æ—Ä–∫–µ—Ä ${i + 1}:`, error.message);
            }
        }
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏ –≤–æ—Ä–∫–µ—Ä—É
    sendTask(task, priority = 0) {
        const taskId = ++this.taskId;
        const taskItem = {
            id: taskId,
            task,
            priority,
            status: 'pending',
            createdAt: Date.now(),
            assignedWorker: null,
            result: null,
            error: null
        };

        this.taskQueue.push(taskItem);
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = –º–µ–Ω—å—à–µ–µ —á–∏—Å–ª–æ)
        this.taskQueue.sort((a, b) => a.priority - b.priority);
        
        console.log(`üìù –ó–∞–¥–∞—á–∞ ${taskId} –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å`);
        this.emit('taskQueued', taskItem);
        
        // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–¥–∞—á—É —Å–≤–æ–±–æ–¥–Ω–æ–º—É –≤–æ—Ä–∫–µ—Ä—É
        this.assignTasks();
        
        return taskId;
    }

    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤–æ—Ä–∫–µ—Ä–∞–º
    assignTasks() {
        const idleWorkers = Array.from(this.workers.values())
            .filter(worker => worker.status === 'idle');
        
        const pendingTasks = this.taskQueue.filter(task => task.status === 'pending');
        
        const assignments = Math.min(idleWorkers.length, pendingTasks.length);
        
        for (let i = 0; i < assignments; i++) {
            const worker = idleWorkers[i];
            const task = pendingTasks[i];
            
            this.assignTaskToWorker(worker, task);
        }
    }

    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–æ—Ä–∫–µ—Ä—É
    assignTaskToWorker(worker, task) {
        worker.status = 'busy';
        worker.currentTask = task;
        task.status = 'running';
        task.assignedWorker = worker.id;
        
        console.log(`‚ñ∂Ô∏è  –ó–∞–¥–∞—á–∞ ${task.id} –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –≤–æ—Ä–∫–µ—Ä—É ${worker.id}`);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É –≤–æ—Ä–∫–µ—Ä—É
        worker.process.send({
            type: 'task',
            taskId: task.id,
            data: task.task
        });
        
        this.emit('taskAssigned', { taskId: task.id, workerId: worker.id });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –≤–æ—Ä–∫–µ—Ä–∞
    handleWorkerMessage(workerId, message) {
        const worker = this.workers.get(workerId);
        if (!worker) return;

        switch (message.type) {
            case 'result':
                this.handleTaskResult(workerId, message);
                break;
            case 'error':
                this.handleTaskError(workerId, message);
                break;
            case 'ready':
                console.log(`‚úÖ –í–æ—Ä–∫–µ—Ä ${workerId} –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ`);
                worker.status = 'idle';
                this.assignTasks();
                break;
        }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–¥–∞—á–∏
    handleTaskResult(workerId, message) {
        const worker = this.workers.get(workerId);
        if (!worker || !worker.currentTask) return;

        const task = worker.currentTask;
        task.status = 'completed';
        task.result = message.result;
        task.completedAt = Date.now();
        
        this.results.set(task.id, task);
        
        console.log(`‚úÖ –ó–∞–¥–∞—á–∞ ${task.id} –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤–æ—Ä–∫–µ—Ä–æ–º ${workerId}`);
        
        // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –≤–æ—Ä–∫–µ—Ä
        worker.status = 'idle';
        worker.currentTask = null;
        worker.tasksCompleted++;
        
        this.emit('taskCompleted', { taskId: task.id, workerId, result: message.result });
        
        // –ù–∞–∑–Ω–∞—á–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É
        this.assignTasks();
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–¥–∞—á–∏
    handleTaskError(workerId, message) {
        const worker = this.workers.get(workerId);
        if (!worker || !worker.currentTask) return;

        const task = worker.currentTask;
        task.status = 'failed';
        task.error = message.error;
        task.completedAt = Date.now();
        
        this.results.set(task.id, task);
        
        console.error(`‚ùå –ó–∞–¥–∞—á–∞ ${task.id} –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π –≤ –≤–æ—Ä–∫–µ—Ä–µ ${workerId}: ${message.error}`);
        
        // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –≤–æ—Ä–∫–µ—Ä
        worker.status = 'idle';
        worker.currentTask = null;
        
        this.emit('taskFailed', { taskId: task.id, workerId, error: message.error });
        
        // –ù–∞–∑–Ω–∞—á–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É
        this.assignTasks();
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ—Ä–∫–µ—Ä–∞
    handleWorkerExit(workerId, code, signal) {
        const worker = this.workers.get(workerId);
        if (!worker) return;

        // –ï—Å–ª–∏ –≤–æ—Ä–∫–µ—Ä –±—ã–ª –∑–∞–Ω—è—Ç –∑–∞–¥–∞—á–µ–π, –ø–æ–º–µ—á–∞–µ–º –∑–∞–¥–∞—á—É –∫–∞–∫ failed
        if (worker.currentTask) {
            const task = worker.currentTask;
            task.status = 'failed';
            task.error = `–í–æ—Ä–∫–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º ${code}`;
            task.completedAt = Date.now();
            this.results.set(task.id, task);
        }

        this.workers.delete(workerId);
        
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (this.workers.size < this.maxWorkers) {
            setTimeout(() => {
                try {
                    this.createWorker();
                } catch (error) {
                    console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤–æ—Ä–∫–µ—Ä:', error.message);
                }
            }, 1000);
        }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –≤–æ—Ä–∫–µ—Ä–∞
    handleWorkerError(workerId, error) {
        const worker = this.workers.get(workerId);
        if (!worker) return;

        if (worker.currentTask) {
            const task = worker.currentTask;
            task.status = 'failed';
            task.error = error.message;
            task.completedAt = Date.now();
            this.results.set(task.id, task);
        }

        this.workers.delete(workerId);
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–¥–∞—á–∏
    getTaskResult(taskId) {
        return this.results.get(taskId);
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    getAllResults() {
        return Array.from(this.results.values());
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—É–ª–∞
    getPoolStatus() {
        const workers = Array.from(this.workers.values());
        const idleWorkers = workers.filter(w => w.status === 'idle').length;
        const busyWorkers = workers.filter(w => w.status === 'busy').length;
        
        const tasks = Array.from(this.results.values());
        const completedTasks = tasks.filter(t => t.status === 'completed').length;
        const failedTasks = tasks.filter(t => t.status === 'failed').length;
        const pendingTasks = this.taskQueue.filter(t => t.status === 'pending').length;
        const runningTasks = this.taskQueue.filter(t => t.status === 'running').length;

        return {
            workers: {
                total: workers.length,
                idle: idleWorkers,
                busy: busyWorkers
            },
            tasks: {
                total: tasks.length + pendingTasks + runningTasks,
                completed: completedTasks,
                failed: failedTasks,
                pending: pendingTasks,
                running: runningTasks
            },
            queueLength: this.taskQueue.length
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    getStats() {
        const workers = Array.from(this.workers.values());
        const totalTasksCompleted = workers.reduce((sum, w) => sum + w.tasksCompleted, 0);
        
        return {
            workers: workers.length,
            totalTasksCompleted,
            averageTasksPerWorker: workers.length > 0 ? (totalTasksCompleted / workers.length).toFixed(2) : 0,
            uptime: workers.length > 0 ? Math.min(...workers.map(w => Date.now() - w.createdAt)) : 0
        };
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—É–ª–∞
    stop() {
        console.log('üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—É–ª–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤...');
        
        for (const [workerId, worker] of this.workers) {
            worker.process.kill('SIGTERM');
        }
        
        this.workers.clear();
        this.emit('poolStopped');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –≤–æ—Ä–∫–µ—Ä–∞
    generateWorkerId() {
        return `worker_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const pool = new ProcessPool({ maxWorkers: 2 });

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
pool.on('taskCompleted', ({ taskId, workerId, result }) => {
    console.log(`üéâ –ó–∞–¥–∞—á–∞ ${taskId} –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤–æ—Ä–∫–µ—Ä–æ–º ${workerId}:`, result);
});

pool.on('taskFailed', ({ taskId, workerId, error }) => {
    console.error(`üí• –ó–∞–¥–∞—á–∞ ${taskId} –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π –≤ –≤–æ—Ä–∫–µ—Ä–µ ${workerId}:`, error);
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É–ª
pool.initialize();

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏
setTimeout(() => {
    pool.sendTask({ type: 'calculate', data: [1, 2, 3, 4, 5] }, 1);
    pool.sendTask({ type: 'process', data: 'Hello World' }, 2);
    pool.sendTask({ type: 'calculate', data: [10, 20, 30] }, 1);
    pool.sendTask({ type: 'process', data: 'Another task' }, 3);
}, 1000);

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
setInterval(() => {
    console.log('\nüìä –°—Ç–∞—Ç—É—Å –ø—É–ª–∞:');
    console.log(pool.getPoolStatus());
}, 5000);

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
setTimeout(() => {
    pool.stop();
}, 30000);

module.exports = ProcessPool;
```

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Node.js –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---
