# üìå –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Node.js

**–í Node.js –æ–±—ä–µ–∫—Ç `window` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å—Ä–µ–¥–µ. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ `window` –≤ Node.js (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–¥ ‚Äî –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –≤ Node.js), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.

---

## üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è window

### üìå –ë–∞–∑–æ–≤—ã–π —Å–ø–æ—Å–æ–±
```javascript
if (typeof window !== 'undefined') {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.');
} else {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Node.js.');
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **`typeof window`** ‚Äî –µ—Å–ª–∏ `window` –æ–ø—Ä–µ–¥–µ–ª—ë–Ω (–≤ –±—Ä–∞—É–∑–µ—Ä–µ), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'object'`
- **–ï—Å–ª–∏ `window` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** (–≤ Node.js), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'undefined'` –±–µ–∑ –æ—à–∏–±–∫–∏

---

## üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç `global` (Node.js)
```javascript
if (typeof global !== 'undefined') {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Node.js.');
}
```

### üìå –û–±—ä–µ–∫—Ç `document` (–±—Ä–∞—É–∑–µ—Ä)
```javascript
if (typeof document !== 'undefined') {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.');
}
```

---

## üîπ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### üìå –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```javascript
const isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';
const isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;

if (isBrowser) {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.');
} else if (isNode) {
    console.log('–ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Node.js.');
}
```

**–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω—é–∞–Ω—Å—ã —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π:**
- **Electron** ‚Äî –≥–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ä–µ–¥–∞
- **React Native** ‚Äî –º–æ–±–∏–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞
- **Worker-threads** ‚Äî –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

---

## üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js –æ–∫—Ä—É–∂–µ–Ω–∏—è
const isNode = typeof process !== 'undefined' && 
               process.versions && 
               process.versions.node;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
const isBrowser = typeof window !== 'undefined' && 
                  typeof document !== 'undefined';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ Web Worker
const isWebWorker = typeof self !== 'undefined' && 
                    typeof importScripts === 'function';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ Service Worker
const isServiceWorker = typeof self !== 'undefined' && 
                        'serviceWorker' in self;
```

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `this`
```javascript
function detectEnvironment() {
    if (typeof window !== 'undefined' && window === this) {
        return 'browser';
    } else if (typeof global !== 'undefined' && global === this) {
        return 'node';
    } else if (typeof self !== 'undefined' && self === this) {
        return 'worker';
    }
    return 'unknown';
}
```

---

## üîπ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### üìå –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
```javascript
let fs, path;

if (typeof window === 'undefined') {
    // Node.js –æ–∫—Ä—É–∂–µ–Ω–∏–µ
    fs = require('fs');
    path = require('path');
} else {
    // –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
    console.log('–ò—Å–ø–æ–ª—å–∑—É–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ API');
}
```

### üìå –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```javascript
function getEnvironment() {
    if (typeof window !== 'undefined') {
        return 'browser';
    } else if (typeof process !== 'undefined' && process.versions && process.versions.node) {
        return 'node';
    } else if (typeof self !== 'undefined') {
        return 'worker';
    }
    return 'unknown';
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const env = getEnvironment();
console.log(`–¢–µ–∫—É—â–∞—è —Å—Ä–µ–¥–∞: ${env}`);
```

### üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
```javascript
function hasFeature(feature) {
    switch (feature) {
        case 'fs':
            return typeof require !== 'undefined' && typeof require('fs') !== 'undefined';
        case 'fetch':
            return typeof fetch !== 'undefined';
        case 'localStorage':
            return typeof localStorage !== 'undefined';
        case 'process':
            return typeof process !== 'undefined';
        default:
            return false;
    }
}
```

---

## üîπ –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞

### üìå –ö–ª–∞—Å—Å EnvironmentDetector
```javascript
class EnvironmentDetector {
    static detect() {
        const checks = {
            isBrowser: typeof window !== 'undefined' && typeof document !== 'undefined',
            isNode: typeof process !== 'undefined' && process.versions && process.versions.node,
            isWebWorker: typeof self !== 'undefined' && typeof importScripts === 'function',
            isServiceWorker: typeof self !== 'undefined' && 'serviceWorker' in self,
            isElectron: typeof process !== 'undefined' && process.versions && process.versions.electron,
            isReactNative: typeof navigator !== 'undefined' && navigator.product === 'ReactNative'
        };

        return {
            ...checks,
            environment: this.getEnvironmentName(checks),
            features: this.getAvailableFeatures(checks)
        };
    }

    static getEnvironmentName(checks) {
        if (checks.isElectron) return 'electron';
        if (checks.isReactNative) return 'react-native';
        if (checks.isServiceWorker) return 'service-worker';
        if (checks.isWebWorker) return 'web-worker';
        if (checks.isBrowser) return 'browser';
        if (checks.isNode) return 'node';
        return 'unknown';
    }

    static getAvailableFeatures(checks) {
        return {
            fileSystem: checks.isNode || checks.isElectron,
            dom: checks.isBrowser || checks.isElectron,
            webWorkers: checks.isBrowser,
            serviceWorkers: checks.isBrowser,
            nodeModules: checks.isNode || checks.isElectron,
            localStorage: checks.isBrowser || checks.isElectron,
            fetch: typeof fetch !== 'undefined'
        };
    }
}
```

---

## üéØ –ò—Ç–æ–≥

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** –≤ Node.js –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `typeof window`, `typeof process` –∏ –¥—Ä—É–≥–∏—Ö –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—ã.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `typeof` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã

## üèÜ –ó–ê–î–ê–ß–ò

–í–æ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å `–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Node.js`:

---

### üìå –ó–∞–¥–∞—á–∞ 1: –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

‚ùì –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –±—Ä–∞—É–∑–µ—Ä–∞, Node.js, Web Worker, Service Worker
- –ü—Ä–æ–≤–µ—Ä–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ä—Å–∏—è—Ö –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å EnvironmentDetector:
// detect() - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ä–µ–¥—É
// getFeatures() - –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
// getVersion() - –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Ä—Å–∏—é —Å—Ä–µ–¥—ã
// isSupported(feature) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ñ—É–Ω–∫—Ü–∏–∏

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
// const detector = new EnvironmentDetector();
// console.log(detector.detect());
// console.log(detector.isSupported('localStorage'));
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
class EnvironmentDetector {
    constructor() {
        this.cache = new Map();
        this.detectionResult = null;
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—ã
    detect() {
        if (this.detectionResult) {
            return this.detectionResult;
        }

        const checks = this.performChecks();
        const environment = this.determineEnvironment(checks);
        const features = this.detectFeatures(checks);
        const versions = this.getVersions(checks);
        const platform = this.getPlatformInfo(checks);

        this.detectionResult = {
            environment,
            features,
            versions,
            platform,
            checks,
            timestamp: Date.now()
        };

        return this.detectionResult;
    }

    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    performChecks() {
        return {
            // –ë–∞–∑–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
            hasWindow: typeof window !== 'undefined',
            hasDocument: typeof document !== 'undefined',
            hasProcess: typeof process !== 'undefined',
            hasGlobal: typeof global !== 'undefined',
            hasSelf: typeof self !== 'undefined',
            hasNavigator: typeof navigator !== 'undefined',
            
            // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
            hasImportScripts: typeof importScripts === 'function',
            hasServiceWorker: typeof self !== 'undefined' && 'serviceWorker' in self,
            hasRequire: typeof require !== 'undefined',
            hasModule: typeof module !== 'undefined',
            hasExports: typeof exports !== 'undefined',
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–π
            hasProcessVersions: typeof process !== 'undefined' && process.versions,
            hasNodeVersion: this.checkNodeVersion(),
            hasElectronVersion: this.checkElectronVersion(),
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∏ API
            hasFetch: typeof fetch !== 'undefined',
            hasLocalStorage: typeof localStorage !== 'undefined',
            hasSessionStorage: typeof sessionStorage !== 'undefined',
            hasIndexedDB: typeof indexedDB !== 'undefined',
            hasWebSocket: typeof WebSocket !== 'undefined',
            hasWorker: typeof Worker !== 'undefined',
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∏ React Native
            isReactNative: this.checkReactNative(),
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∏ Electron
            isElectron: this.checkElectron()
        };
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
    determineEnvironment(checks) {
        if (checks.isElectron) return 'electron';
        if (checks.isReactNative) return 'react-native';
        if (checks.hasServiceWorker) return 'service-worker';
        if (checks.hasImportScripts) return 'web-worker';
        if (checks.hasWindow && checks.hasDocument) return 'browser';
        if (checks.hasProcess && checks.hasNodeVersion) return 'node';
        if (checks.hasSelf && !checks.hasWindow) return 'worker';
        return 'unknown';
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
    detectFeatures(checks) {
        return {
            // –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
            fileSystem: checks.hasProcess || checks.isElectron,
            require: checks.hasRequire,
            modules: checks.hasModule && checks.hasExports,
            
            // DOM API
            dom: checks.hasWindow && checks.hasDocument,
            localStorage: checks.hasLocalStorage,
            sessionStorage: checks.hasSessionStorage,
            indexedDB: checks.hasIndexedDB,
            
            // –°–µ—Ç–µ–≤—ã–µ API
            fetch: checks.hasFetch,
            webSocket: checks.hasWebSocket,
            xhr: typeof XMLHttpRequest !== 'undefined',
            
            // –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
            webWorkers: checks.hasWorker && checks.hasWindow,
            serviceWorkers: checks.hasServiceWorker,
            workerThreads: checks.hasProcess && checks.hasRequire,
            
            // –î—Ä—É–≥–∏–µ API
            crypto: typeof crypto !== 'undefined',
            performance: typeof performance !== 'undefined',
            console: typeof console !== 'undefined',
            setTimeout: typeof setTimeout !== 'undefined',
            setInterval: typeof setInterval !== 'undefined'
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π
    getVersions(checks) {
        const versions = {};

        if (checks.hasProcess && checks.hasProcessVersions) {
            versions.node = process.versions.node;
            versions.v8 = process.versions.v8;
            versions.uv = process.versions.uv;
            versions.openssl = process.versions.openssl;
            
            if (checks.isElectron) {
                versions.electron = process.versions.electron;
            }
        }

        if (checks.hasNavigator) {
            versions.userAgent = navigator.userAgent;
            versions.language = navigator.language;
            versions.platform = navigator.platform;
        }

        return versions;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
    getPlatformInfo(checks) {
        const info = {
            os: 'unknown',
            arch: 'unknown',
            type: 'unknown'
        };

        if (checks.hasProcess) {
            info.os = process.platform;
            info.arch = process.arch;
            info.type = process.type || 'node';
        }

        if (checks.hasNavigator) {
            info.userAgent = navigator.userAgent;
            info.language = navigator.language;
            info.platform = navigator.platform;
        }

        return info;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏
    isSupported(feature) {
        const detection = this.detect();
        return detection.features[feature] || false;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
    getFeatures() {
        return this.detect().features;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ —Å—Ä–µ–¥—ã
    getVersion() {
        const detection = this.detect();
        return detection.versions;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
    getPlatform() {
        return this.detect().platform;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js –≤–µ—Ä—Å–∏–∏
    checkNodeVersion() {
        return typeof process !== 'undefined' && 
               process.versions && 
               typeof process.versions.node === 'string';
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ Electron –≤–µ—Ä—Å–∏–∏
    checkElectronVersion() {
        return typeof process !== 'undefined' && 
               process.versions && 
               typeof process.versions.electron === 'string';
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ React Native
    checkReactNative() {
        return typeof navigator !== 'undefined' && 
               navigator.product === 'ReactNative';
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ Electron
    checkElectron() {
        return typeof process !== 'undefined' && 
               process.versions && 
               process.versions.electron;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    getDetailedInfo() {
        const detection = this.detect();
        
        return {
            environment: detection.environment,
            features: detection.features,
            versions: detection.versions,
            platform: detection.platform,
            capabilities: this.getCapabilities(),
            recommendations: this.getRecommendations()
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
    getCapabilities() {
        const features = this.getFeatures();
        
        return {
            canReadFiles: features.fileSystem,
            canUseDOM: features.dom,
            canUseStorage: features.localStorage || features.sessionStorage,
            canMakeRequests: features.fetch || features.xhr,
            canUseWorkers: features.webWorkers || features.workerThreads,
            canUseCrypto: features.crypto
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    getRecommendations() {
        const env = this.detect().environment;
        const features = this.getFeatures();
        
        const recommendations = [];

        if (env === 'browser' && !features.fetch) {
            recommendations.push('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polyfill –¥–ª—è fetch API');
        }

        if (env === 'node' && !features.fileSystem) {
            recommendations.push('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–æ–¥—É–ª—è fs');
        }

        if (!features.localStorage && !features.sessionStorage) {
            recommendations.push('–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö');
        }

        return recommendations;
    }

    // –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
    clearCache() {
        this.cache.clear();
        this.detectionResult = null;
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
    getReport() {
        const detection = this.detect();
        
        return {
            summary: {
                environment: detection.environment,
                timestamp: new Date(detection.timestamp).toISOString(),
                featuresCount: Object.values(detection.features).filter(Boolean).length
            },
            details: detection,
            capabilities: this.getCapabilities(),
            recommendations: this.getRecommendations()
        };
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const detector = new EnvironmentDetector();

console.log('üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:');
console.log(detector.detect());

console.log('\nüìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:');
console.log(detector.getFeatures());

console.log('\n‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π:');
console.log('localStorage:', detector.isSupported('localStorage'));
console.log('fileSystem:', detector.isSupported('fileSystem'));
console.log('fetch:', detector.isSupported('fetch'));

console.log('\nüìä –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:');
console.log(detector.getReport());

module.exports = EnvironmentDetector;
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

‚ùì –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä API –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- Fallback –¥–ª—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Å—Ä–µ–¥

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å AdaptiveModule:
// readFile(path) - —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ä–µ–¥—ã
// writeFile(path, data) - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª
// getStorage(key) - –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
// setStorage(key, value) - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
// const adapter = new AdaptiveModule();
// adapter.writeFile('test.txt', 'Hello World');
// const data = adapter.getStorage('userData');
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const EnvironmentDetector = require('./EnvironmentDetector');

class AdaptiveModule {
    constructor() {
        this.detector = new EnvironmentDetector();
        this.environment = this.detector.detect().environment;
        this.features = this.detector.getFeatures();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥
        this.initAPIs();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API
    initAPIs() {
        this.fs = null;
        this.path = null;
        this.storage = null;
        this.http = null;

        // Node.js API
        if (this.features.fileSystem) {
            try {
                this.fs = require('fs');
                this.path = require('path');
            } catch (error) {
                console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª–∏ fs –∏ path');
            }
        }

        // –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        if (this.features.localStorage) {
            this.storage = localStorage;
        } else if (this.features.sessionStorage) {
            this.storage = sessionStorage;
        }

        // HTTP –∫–ª–∏–µ–Ω—Ç
        if (this.features.fetch) {
            this.http = fetch;
        } else if (typeof XMLHttpRequest !== 'undefined') {
            this.http = this.createXHRAdapter();
        }
    }

    // –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    async readFile(filePath) {
        if (this.features.fileSystem && this.fs) {
            // Node.js
            return new Promise((resolve, reject) => {
                this.fs.readFile(filePath, 'utf8', (err, data) => {
                    if (err) reject(err);
                    else resolve(data);
                });
            });
        } else if (this.features.fetch) {
            // –ë—Ä–∞—É–∑–µ—Ä - —á–µ—Ä–µ–∑ fetch
            try {
                const response = await fetch(filePath);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return await response.text();
            } catch (error) {
                throw new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª: ${error.message}`);
            }
        } else {
            throw new Error('–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ');
        }
    }

    // –ó–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞
    async writeFile(filePath, data) {
        if (this.features.fileSystem && this.fs) {
            // Node.js
            return new Promise((resolve, reject) => {
                this.fs.writeFile(filePath, data, 'utf8', (err) => {
                    if (err) reject(err);
                    else resolve();
                });
            });
        } else {
            // –ë—Ä–∞—É–∑–µ—Ä - —á–µ—Ä–µ–∑ Blob –∏ download
            this.downloadFile(data, filePath);
        }
    }

    // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
    downloadFile(data, filename) {
        if (typeof window === 'undefined') {
            throw new Error('–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
        }

        const blob = new Blob([data], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        URL.revokeObjectURL(url);
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    getStorage(key) {
        if (this.storage) {
            try {
                const data = this.storage.getItem(key);
                return data ? JSON.parse(data) : null;
            } catch (error) {
                console.warn('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:', error.message);
                return null;
            }
        } else {
            console.warn('–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            return null;
        }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    setStorage(key, value) {
        if (this.storage) {
            try {
                this.storage.setItem(key, JSON.stringify(value));
                return true;
            } catch (error) {
                console.warn('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:', error.message);
                return false;
            }
        } else {
            console.warn('–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            return false;
        }
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    removeStorage(key) {
        if (this.storage) {
            try {
                this.storage.removeItem(key);
                return true;
            } catch (error) {
                console.warn('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:', error.message);
                return false;
            }
        }
        return false;
    }

    // HTTP –∑–∞–ø—Ä–æ—Å
    async httpRequest(url, options = {}) {
        if (this.http) {
            if (this.features.fetch) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º fetch
                const response = await fetch(url, {
                    method: options.method || 'GET',
                    headers: options.headers || {},
                    body: options.body || undefined
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                return {
                    status: response.status,
                    headers: Object.fromEntries(response.headers.entries()),
                    data: await response.text()
                };
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º XMLHttpRequest
                return this.xhrRequest(url, options);
            }
        } else {
            throw new Error('HTTP –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ –¥–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ');
        }
    }

    // XMLHttpRequest –∞–¥–∞–ø—Ç–µ—Ä
    xhrRequest(url, options) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            
            xhr.open(options.method || 'GET', url);
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
            if (options.headers) {
                Object.entries(options.headers).forEach(([key, value]) => {
                    xhr.setRequestHeader(key, value);
                });
            }
            
            xhr.onload = () => {
                if (xhr.status >= 200 && xhr.status < 300) {
                    resolve({
                        status: xhr.status,
                        headers: this.parseHeaders(xhr.getAllResponseHeaders()),
                        data: xhr.responseText
                    });
                } else {
                    reject(new Error(`HTTP ${xhr.status}: ${xhr.statusText}`));
                }
            };
            
            xhr.onerror = () => {
                reject(new Error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏'));
            };
            
            xhr.send(options.body || null);
        });
    }

    // –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    parseHeaders(headerString) {
        const headers = {};
        headerString.split('\r\n').forEach(line => {
            const parts = line.split(': ');
            if (parts.length === 2) {
                headers[parts[0]] = parts[1];
            }
        });
        return headers;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ XHR –∞–¥–∞–ø—Ç–µ—Ä–∞
    createXHRAdapter() {
        return (url, options) => this.xhrRequest(url, options);
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ä–µ–¥–µ
    getEnvironmentInfo() {
        return {
            environment: this.environment,
            features: this.features,
            capabilities: {
                canReadFiles: this.features.fileSystem,
                canWriteFiles: this.features.fileSystem,
                canUseStorage: !!this.storage,
                canMakeRequests: !!this.http,
                canDownloadFiles: this.environment === 'browser'
            }
        };
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏
    isSupported(feature) {
        const capabilities = {
            'readFile': this.features.fileSystem || this.features.fetch,
            'writeFile': this.features.fileSystem || this.environment === 'browser',
            'storage': !!this.storage,
            'http': !!this.http
        };
        
        return capabilities[feature] || false;
    }

    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
    async processData(data, processor) {
        try {
            return await processor(data);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error.message);
            throw error;
        }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    saveConfig(config) {
        return this.setStorage('app_config', config);
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    loadConfig() {
        return this.getStorage('app_config') || {};
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö
    getCapabilitiesReport() {
        const info = this.getEnvironmentInfo();
        
        return {
            environment: info.environment,
            supportedFeatures: Object.entries(info.capabilities)
                .filter(([, supported]) => supported)
                .map(([feature]) => feature),
            unsupportedFeatures: Object.entries(info.capabilities)
                .filter(([, supported]) => !supported)
                .map(([feature]) => feature),
            recommendations: this.getRecommendations()
        };
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    getRecommendations() {
        const recommendations = [];
        
        if (!this.features.fileSystem && this.environment === 'browser') {
            recommendations.push('–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ File API –∏–ª–∏ drag&drop');
        }
        
        if (!this.storage) {
            recommendations.push('–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ IndexedDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö');
        }
        
        if (!this.http) {
            recommendations.push('–î–æ–±–∞–≤—å—Ç–µ polyfill –¥–ª—è fetch API');
        }
        
        return recommendations;
    }
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const adapter = new AdaptiveModule();

console.log('üîß –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–æ–¥—É–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
console.log('üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ä–µ–¥–µ:', adapter.getEnvironmentInfo());

// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
console.log('\n‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:');
console.log('readFile:', adapter.isSupported('readFile'));
console.log('writeFile:', adapter.isSupported('writeFile'));
console.log('storage:', adapter.isSupported('storage'));
console.log('http:', adapter.isSupported('http'));

// –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
adapter.setStorage('test_key', { message: 'Hello World', timestamp: Date.now() });
const storedData = adapter.getStorage('test_key');
console.log('\nüíæ –î–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:', storedData);

// –û—Ç—á–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö
console.log('\nüìã –û—Ç—á–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö:');
console.log(adapter.getCapabilitiesReport());

module.exports = AdaptiveModule;
```

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Node.js –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

---
