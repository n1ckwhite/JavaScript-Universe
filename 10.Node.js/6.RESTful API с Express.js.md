# üìå RESTful API —Å Express.js

**Express.js** ‚Äî —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Node.js, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ API. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –∫–Ω–∏–≥.

---

## üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Express.js

### üìå –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:
```bash
mkdir rest-api-example
cd rest-api-example
npm init -y
```

### üìå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Express:
```bash
npm install express
```

---

## üîπ –ü—Ä–∏–º–µ—Ä RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∞–º–∏

### ‚úç –ü–æ–ª–Ω—ã–π –∫–æ–¥:
```javascript
const express = require('express');
const app = express();
const PORT = 3000;

// –ò—Å–ø–æ–ª—å–∑—É–µ–º middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON
app.use(express.json());

// –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–≤–º–µ—Å—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
let books = [
    { id: 1, title: '1984', author: 'George Orwell' },
    { id: 2, title: 'To Kill a Mockingbird', author: 'Harper Lee' },
];

// === CRUD –û–ø–µ—Ä–∞—Ü–∏–∏ ===

// 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ (READ)
app.get('/books', (req, res) => {
    res.json(books);
});

// 2. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ –ø–æ ID (READ)
app.get('/books/:id', (req, res) => {
    const bookId = parseInt(req.params.id);
    const book = books.find(b => b.id === bookId);

    if (book) {
        res.json(book);
    } else {
        res.status(404).json({ message: '–ö–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' });
    }
});

// 3. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É (CREATE)
app.post('/books', (req, res) => {
    const { title, author } = req.body;

    if (!title || !author) {
        return res.status(400).json({ message: '–ü–æ–ª–µ title –∏ author –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã' });
    }

    const newBook = {
        id: books.length + 1,
        title,
        author,
    };

    books.push(newBook);
    res.status(201).json(newBook);
});

// 4. –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ –ø–æ ID (UPDATE)
app.put('/books/:id', (req, res) => {
    const bookId = parseInt(req.params.id);
    const { title, author } = req.body;

    const bookIndex = books.findIndex(b => b.id === bookId);

    if (bookIndex !== -1) {
        books[bookIndex] = {
            id: bookId,
            title: title || books[bookIndex].title,
            author: author || books[bookIndex].author,
        };

        res.json(books[bookIndex]);
    } else {
        res.status(404).json({ message: '–ö–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' });
    }
});

// 5. –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID (DELETE)
app.delete('/books/:id', (req, res) => {
    const bookId = parseInt(req.params.id);
    const bookIndex = books.findIndex(b => b.id === bookId);

    if (bookIndex !== -1) {
        const deletedBook = books.splice(bookIndex, 1);
        res.json(deletedBook[0]);
    } else {
        res.status(404).json({ message: '–ö–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' });
    }
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
app.listen(PORT, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
});
```

---

## üîπ –û–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

### üìå 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–Ω–∏–≥
- **–ú–∞—Ä—à—Ä—É—Ç:** `GET /books`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥

### üìå 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –ø–æ ID
- **–ú–∞—Ä—à—Ä—É—Ç:** `GET /books/:id`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –∫–Ω–∏–≥—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID

### üìå 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–Ω–∏–≥–∏
- **–ú–∞—Ä—à—Ä—É—Ç:** `POST /books`
- **–û–∂–∏–¥–∞–µ—Ç:** –æ–±—ä–µ–∫—Ç –∫–Ω–∏–≥–∏ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞

#### ‚úç –ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
    "title": "The Catcher in the Rye",
    "author": "J.D. Salinger"
}
```

### üìå 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –ø–æ ID
- **–ú–∞—Ä—à—Ä—É—Ç:** `PUT /books/:id`
- **–û–±–Ω–æ–≤–ª—è–µ—Ç:** —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–Ω–∏–≥—É. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Ç–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å

### üìå 5. –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –ø–æ ID
- **–ú–∞—Ä—à—Ä—É—Ç:** `DELETE /books/:id`
- **–£–¥–∞–ª—è–µ—Ç:** –∫–Ω–∏–≥—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID

---

## üîπ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API

### üìå 1. Postman
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Postman –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å GET, POST, PUT –∏ DELETE –∑–∞–ø—Ä–æ—Å—ã, —É–∫–∞–∑—ã–≤–∞—è –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞.

### üìå 2. curl
–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
curl http://localhost:3000/books

# –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É
curl -X POST http://localhost:3000/books \
  -H "Content-Type: application/json" \
  -d '{"title":"The Great Gatsby","author":"F. Scott Fitzgerald"}'

# –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É
curl -X PUT http://localhost:3000/books/1 \
  -H "Content-Type: application/json" \
  -d '{"title":"1984 Updated"}'

# –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É
curl -X DELETE http://localhost:3000/books/1
```

### üìå 3. –ë—Ä–∞—É–∑–µ—Ä
–î–ª—è –º–µ—Ç–æ–¥–æ–≤ GET –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É, –Ω–∞–ø—Ä–∏–º–µ—Ä: `http://localhost:3000/books`

---

## üîπ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Express.js –¥–ª—è API

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞
–õ–µ–≥–∫–∏–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.

### ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
–£–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞–º–∏.

### ‚úÖ Middleware
–õ–µ–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—à–∏–±–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –ø–ª–∞–≥–∏–Ω–æ–≤.

---

## üîπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Express.js

### üìå Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
app.use((req, res, next) => {
    console.log(`${new Date().toISOString()} - ${req.method} ${req.url}`);
    next();
});
```

### üìå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```javascript
// Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ message: '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫!' });
});
```

### üìå CORS –¥–ª—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
app.use((req, res, next) => {
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');
    res.header('Access-Control-Allow-Headers', 'Content-Type');
    next();
});
```

### üìå –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```javascript
// Middleware –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
const validateBook = (req, res, next) => {
    const { title, author } = req.body;
    if (!title || !author) {
        return res.status(400).json({ 
            message: '–ü–æ–ª—è title –∏ author –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã' 
        });
    }
    next();
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
app.post('/books', validateBook, (req, res) => {
    // –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏
});
```

---

## üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üìå –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
rest-api/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bookController.js
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bookRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.js
‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ server.js
```

### üìå –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏:
```javascript
// routes/bookRoutes.js
const express = require('express');
const router = express.Router();
const bookController = require('../controllers/bookController');

router.get('/', bookController.getAllBooks);
router.get('/:id', bookController.getBookById);
router.post('/', bookController.createBook);
router.put('/:id', bookController.updateBook);
router.delete('/:id', bookController.deleteBook);

module.exports = router;
```

---

## üéØ –ò—Ç–æ–≥

**Express.js** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è RESTful API –≤ Node.js. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ –≥–∏–±–∫–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö HTTP-–º–µ—Ç–æ–¥–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ª–µ–≥–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RESTful –ø—Ä–∏–Ω—Ü–∏–ø—ã –¥–ª—è –¥–∏–∑–∞–π–Ω–∞ API
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∫–æ–¥ –Ω–∞ –º–æ–¥—É–ª–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- –î–æ–±–∞–≤–ª—è–π—Ç–µ middleware –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ

## üèÜ –ó–ê–î–ê–ß–ò

–í–æ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å `RESTful API —Å Express.js`:

---

### üìå –ó–∞–¥–∞—á–∞ 1: –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (Todo API)

‚ùì –°–æ–∑–¥–∞–π—Ç–µ RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ/–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ API —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:
// GET /todos - –≤—Å–µ –∑–∞–¥–∞—á–∏
// GET /todos/:id - –∑–∞–¥–∞—á–∞ –ø–æ ID
// POST /todos - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
// PUT /todos/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
// DELETE /todos/:id - —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
// GET /todos?status=completed - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á–∏:
// { id, title, description, completed, createdAt, updatedAt }
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const express = require('express');
const app = express();
const PORT = 3000;

app.use(express.json());

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏
let todos = [
    { 
        id: 1, 
        title: '–ò–∑—É—á–∏—Ç—å Express.js', 
        description: '–û—Å–≤–æ–∏—Ç—å –æ—Å–Ω–æ–≤—ã —Å–æ–∑–¥–∞–Ω–∏—è RESTful API',
        completed: false,
        createdAt: new Date('2024-01-15'),
        updatedAt: new Date('2024-01-15')
    },
    { 
        id: 2, 
        title: '–°–æ–∑–¥–∞—Ç—å Todo API', 
        description: '–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–¥–∞—á',
        completed: true,
        createdAt: new Date('2024-01-16'),
        updatedAt: new Date('2024-01-16')
    }
];

let nextId = 3;

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
app.use((req, res, next) => {
    console.log(`${new Date().toISOString()} - ${req.method} ${req.url}`);
    next();
});

// GET /todos - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
app.get('/todos', (req, res) => {
    const { status } = req.query;
    let filteredTodos = todos;
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
    if (status === 'completed') {
        filteredTodos = todos.filter(todo => todo.completed);
    } else if (status === 'pending') {
        filteredTodos = todos.filter(todo => !todo.completed);
    }
    
    res.json({
        success: true,
        count: filteredTodos.length,
        data: filteredTodos
    });
});

// GET /todos/:id - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
app.get('/todos/:id', (req, res) => {
    const todoId = parseInt(req.params.id);
    const todo = todos.find(t => t.id === todoId);
    
    if (todo) {
        res.json({
            success: true,
            data: todo
        });
    } else {
        res.status(404).json({
            success: false,
            message: '–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'
        });
    }
});

// POST /todos - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
app.post('/todos', (req, res) => {
    const { title, description } = req.body;
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!title) {
        return res.status(400).json({
            success: false,
            message: '–ü–æ–ª–µ title –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ'
        });
    }
    
    const newTodo = {
        id: nextId++,
        title,
        description: description || '',
        completed: false,
        createdAt: new Date(),
        updatedAt: new Date()
    };
    
    todos.push(newTodo);
    
    res.status(201).json({
        success: true,
        message: '–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞',
        data: newTodo
    });
});

// PUT /todos/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
app.put('/todos/:id', (req, res) => {
    const todoId = parseInt(req.params.id);
    const { title, description, completed } = req.body;
    
    const todoIndex = todos.findIndex(t => t.id === todoId);
    
    if (todoIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'
        });
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è
    if (title !== undefined) todos[todoIndex].title = title;
    if (description !== undefined) todos[todoIndex].description = description;
    if (completed !== undefined) todos[todoIndex].completed = completed;
    
    todos[todoIndex].updatedAt = new Date();
    
    res.json({
        success: true,
        message: '–ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞',
        data: todos[todoIndex]
    });
});

// DELETE /todos/:id - —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
app.delete('/todos/:id', (req, res) => {
    const todoId = parseInt(req.params.id);
    const todoIndex = todos.findIndex(t => t.id === todoId);
    
    if (todoIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'
        });
    }
    
    const deletedTodo = todos.splice(todoIndex, 1)[0];
    
    res.json({
        success: true,
        message: '–ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞',
        data: deletedTodo
    });
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({
        success: false,
        message: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'
    });
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ 404
app.use('*', (req, res) => {
    res.status(404).json({
        success: false,
        message: '–ú–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
    });
});

app.listen(PORT, () => {
    console.log(`üöÄ Todo API –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
    console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:');
    console.log('   GET    /todos - –≤—Å–µ –∑–∞–¥–∞—á–∏');
    console.log('   GET    /todos/:id - –∑–∞–¥–∞—á–∞ –ø–æ ID');
    console.log('   POST   /todos - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É');
    console.log('   PUT    /todos/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É');
    console.log('   DELETE /todos/:id - —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É');
    console.log('   GET    /todos?status=completed - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É');
});

module.exports = app;
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è –±–ª–æ–≥–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

‚ùì –°–æ–∑–¥–∞–π—Ç–µ API –¥–ª—è –±–ª–æ–≥–∞ —Å –ø–æ—Å—Ç–∞–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ø–æ—Å—Ç–∞–º
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ API —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:
// POST /auth/register - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
// POST /auth/login - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
// GET /posts - –≤—Å–µ –ø–æ—Å—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
// GET /posts/:id - –ø–æ—Å—Ç –ø–æ ID
// POST /posts - —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
// PUT /posts/:id - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
// DELETE /posts/:id - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
// POST /posts/:id/comments - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
// GET /posts/:id/comments - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—Å—Ç–∞

// –°—Ç—Ä—É–∫—Ç—É—Ä—ã:
// User: { id, username, email, password }
// Post: { id, title, content, authorId, createdAt, updatedAt }
// Comment: { id, postId, authorId, content, createdAt }
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const express = require('express');
const app = express();
const PORT = 3000;

app.use(express.json());

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏
let users = [
    { id: 1, username: 'admin', email: 'admin@example.com', password: 'admin123' }
];
let posts = [
    { 
        id: 1, 
        title: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–ª–æ–≥!', 
        content: '–≠—Ç–æ –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ...',
        authorId: 1,
        createdAt: new Date('2024-01-15'),
        updatedAt: new Date('2024-01-15')
    }
];
let comments = [
    { 
        id: 1, 
        postId: 1, 
        authorId: 1, 
        content: '–û—Ç–ª–∏—á–Ω—ã–π –ø–æ—Å—Ç!',
        createdAt: new Date('2024-01-15')
    }
];

let nextUserId = 2;
let nextPostId = 2;
let nextCommentId = 2;

// Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
const authenticateUser = (req, res, next) => {
    const token = req.headers.authorization;
    
    if (!token) {
        return res.status(401).json({
            success: false,
            message: '–¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω'
        });
    }
    
    // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JWT)
    const userId = parseInt(token);
    const user = users.find(u => u.id === userId);
    
    if (!user) {
        return res.status(401).json({
            success: false,
            message: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏'
        });
    }
    
    req.user = user;
    next();
};

// POST /auth/register - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
app.post('/auth/register', (req, res) => {
    const { username, email, password } = req.body;
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!username || !email || !password) {
        return res.status(400).json({
            success: false,
            message: '–í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã'
        });
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const existingUser = users.find(u => u.email === email || u.username === username);
    if (existingUser) {
        return res.status(400).json({
            success: false,
            message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email –∏–ª–∏ username —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'
        });
    }
    
    const newUser = {
        id: nextUserId++,
        username,
        email,
        password // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ö–µ—à–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å
    };
    
    users.push(newUser);
    
    res.status(201).json({
        success: true,
        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω',
        data: { id: newUser.id, username: newUser.username, email: newUser.email }
    });
});

// POST /auth/login - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
app.post('/auth/login', (req, res) => {
    const { email, password } = req.body;
    
    const user = users.find(u => u.email === email && u.password === password);
    
    if (!user) {
        return res.status(401).json({
            success: false,
            message: '–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å'
        });
    }
    
    res.json({
        success: true,
        message: '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞',
        data: { 
            token: user.id, // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JWT
            user: { id: user.id, username: user.username, email: user.email }
        }
    });
});

// GET /posts - –≤—Å–µ –ø–æ—Å—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
app.get('/posts', (req, res) => {
    const { page = 1, limit = 10, search } = req.query;
    const pageNum = parseInt(page);
    const limitNum = parseInt(limit);
    
    let filteredPosts = posts;
    
    // –ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É
    if (search) {
        filteredPosts = posts.filter(post => 
            post.title.toLowerCase().includes(search.toLowerCase())
        );
    }
    
    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
    filteredPosts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
    
    // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
    const startIndex = (pageNum - 1) * limitNum;
    const endIndex = startIndex + limitNum;
    const paginatedPosts = filteredPosts.slice(startIndex, endIndex);
    
    res.json({
        success: true,
        data: paginatedPosts,
        pagination: {
            currentPage: pageNum,
            totalPages: Math.ceil(filteredPosts.length / limitNum),
            totalPosts: filteredPosts.length,
            hasNext: endIndex < filteredPosts.length,
            hasPrev: pageNum > 1
        }
    });
});

// GET /posts/:id - –ø–æ—Å—Ç –ø–æ ID
app.get('/posts/:id', (req, res) => {
    const postId = parseInt(req.params.id);
    const post = posts.find(p => p.id === postId);
    
    if (!post) {
        return res.status(404).json({
            success: false,
            message: '–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    res.json({
        success: true,
        data: post
    });
});

// POST /posts - —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
app.post('/posts', authenticateUser, (req, res) => {
    const { title, content } = req.body;
    
    if (!title || !content) {
        return res.status(400).json({
            success: false,
            message: '–ü–æ–ª—è title –∏ content –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã'
        });
    }
    
    const newPost = {
        id: nextPostId++,
        title,
        content,
        authorId: req.user.id,
        createdAt: new Date(),
        updatedAt: new Date()
    };
    
    posts.push(newPost);
    
    res.status(201).json({
        success: true,
        message: '–ü–æ—Å—Ç —Å–æ–∑–¥–∞–Ω',
        data: newPost
    });
});

// PUT /posts/:id - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
app.put('/posts/:id', authenticateUser, (req, res) => {
    const postId = parseInt(req.params.id);
    const postIndex = posts.findIndex(p => p.id === postId);
    
    if (postIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–∞
    if (posts[postIndex].authorId !== req.user.id) {
        return res.status(403).json({
            success: false,
            message: '–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞'
        });
    }
    
    const { title, content } = req.body;
    
    if (title !== undefined) posts[postIndex].title = title;
    if (content !== undefined) posts[postIndex].content = content;
    posts[postIndex].updatedAt = new Date();
    
    res.json({
        success: true,
        message: '–ü–æ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω',
        data: posts[postIndex]
    });
});

// DELETE /posts/:id - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
app.delete('/posts/:id', authenticateUser, (req, res) => {
    const postId = parseInt(req.params.id);
    const postIndex = posts.findIndex(p => p.id === postId);
    
    if (postIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–∞
    if (posts[postIndex].authorId !== req.user.id) {
        return res.status(403).json({
            success: false,
            message: '–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞'
        });
    }
    
    const deletedPost = posts.splice(postIndex, 1)[0];
    
    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
    comments = comments.filter(c => c.postId !== postId);
    
    res.json({
        success: true,
        message: '–ü–æ—Å—Ç —É–¥–∞–ª–µ–Ω',
        data: deletedPost
    });
});

// POST /posts/:id/comments - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
app.post('/posts/:id/comments', (req, res) => {
    const postId = parseInt(req.params.id);
    const { content } = req.body;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
    const post = posts.find(p => p.id === postId);
    if (!post) {
        return res.status(404).json({
            success: false,
            message: '–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    if (!content) {
        return res.status(400).json({
            success: false,
            message: '–ü–æ–ª–µ content –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ'
        });
    }
    
    const newComment = {
        id: nextCommentId++,
        postId,
        authorId: 1, // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–ª—É—á–∞–π—Ç–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞
        content,
        createdAt: new Date()
    };
    
    comments.push(newComment);
    
    res.status(201).json({
        success: true,
        message: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω',
        data: newComment
    });
});

// GET /posts/:id/comments - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—Å—Ç–∞
app.get('/posts/:id/comments', (req, res) => {
    const postId = parseInt(req.params.id);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
    const post = posts.find(p => p.id === postId);
    if (!post) {
        return res.status(404).json({
            success: false,
            message: '–ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    const postComments = comments.filter(c => c.postId === postId);
    
    res.json({
        success: true,
        data: postComments
    });
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({
        success: false,
        message: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'
    });
});

app.listen(PORT, () => {
    console.log(`üöÄ Blog API –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
    console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:');
    console.log('   POST   /auth/register - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è');
    console.log('   POST   /auth/login - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
    console.log('   GET    /posts - –≤—Å–µ –ø–æ—Å—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π');
    console.log('   GET    /posts/:id - –ø–æ—Å—Ç –ø–æ ID');
    console.log('   POST   /posts - —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)');
    console.log('   PUT    /posts/:id - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)');
    console.log('   DELETE /posts/:id - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)');
    console.log('   POST   /posts/:id/comments - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π');
    console.log('   GET    /posts/:id/comments - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏');
});

module.exports = app;
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞

‚ùì –°–æ–∑–¥–∞–π—Ç–µ API –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏:
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π –ø–æ–∫—É–ø–æ–∫
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ü–µ–Ω–µ

```javascript
// –°–æ–∑–¥–∞–π—Ç–µ API —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:
// GET /products - –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
// GET /products/:id - —Ç–æ–≤–∞—Ä –ø–æ ID
// POST /products - —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
// PUT /products/:id - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
// DELETE /products/:id - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
// GET /cart - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
// POST /cart/items - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
// PUT /cart/items/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
// DELETE /cart/items/:id - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
// POST /orders - –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
// GET /orders - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
// GET /stats/sales - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂

// –°—Ç—Ä—É–∫—Ç—É—Ä—ã:
// Product: { id, name, description, price, category, stock, createdAt }
// CartItem: { id, productId, quantity, price }
// Order: { id, items, total, status, createdAt }
```

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const express = require('express');
const app = express();
const PORT = 3000;

app.use(express.json());

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏
let products = [
    { 
        id: 1, 
        name: 'iPhone 15', 
        description: '–ù–æ–≤–µ–π—à–∏–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω –æ—Ç Apple',
        price: 999.99,
        category: 'electronics',
        stock: 50,
        createdAt: new Date('2024-01-15')
    },
    { 
        id: 2, 
        name: 'MacBook Pro', 
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω–æ—É—Ç–±—É–∫',
        price: 1999.99,
        category: 'electronics',
        stock: 25,
        createdAt: new Date('2024-01-15')
    },
    { 
        id: 3, 
        name: 'Nike Air Max', 
        description: '–£–¥–æ–±–Ω—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏',
        price: 129.99,
        category: 'shoes',
        stock: 100,
        createdAt: new Date('2024-01-15')
    }
];

let cart = [];
let orders = [];
let nextProductId = 4;
let nextOrderId = 1;

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
app.use((req, res, next) => {
    console.log(`${new Date().toISOString()} - ${req.method} ${req.url}`);
    next();
});

// GET /products - –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
app.get('/products', (req, res) => {
    const { category, minPrice, maxPrice, search } = req.query;
    let filteredProducts = [...products];
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    if (category) {
        filteredProducts = filteredProducts.filter(p => p.category === category);
    }
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–Ω–µ
    if (minPrice) {
        filteredProducts = filteredProducts.filter(p => p.price >= parseFloat(minPrice));
    }
    if (maxPrice) {
        filteredProducts = filteredProducts.filter(p => p.price <= parseFloat(maxPrice));
    }
    
    // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
    if (search) {
        filteredProducts = filteredProducts.filter(p => 
            p.name.toLowerCase().includes(search.toLowerCase())
        );
    }
    
    res.json({
        success: true,
        count: filteredProducts.length,
        data: filteredProducts
    });
});

// GET /products/:id - —Ç–æ–≤–∞—Ä –ø–æ ID
app.get('/products/:id', (req, res) => {
    const productId = parseInt(req.params.id);
    const product = products.find(p => p.id === productId);
    
    if (!product) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    res.json({
        success: true,
        data: product
    });
});

// POST /products - —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
app.post('/products', (req, res) => {
    const { name, description, price, category, stock } = req.body;
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!name || !price || !category) {
        return res.status(400).json({
            success: false,
            message: '–ü–æ–ª—è name, price –∏ category –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã'
        });
    }
    
    if (price <= 0) {
        return res.status(400).json({
            success: false,
            message: '–¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ 0'
        });
    }
    
    const newProduct = {
        id: nextProductId++,
        name,
        description: description || '',
        price: parseFloat(price),
        category,
        stock: parseInt(stock) || 0,
        createdAt: new Date()
    };
    
    products.push(newProduct);
    
    res.status(201).json({
        success: true,
        message: '–¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω',
        data: newProduct
    });
});

// PUT /products/:id - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
app.put('/products/:id', (req, res) => {
    const productId = parseInt(req.params.id);
    const productIndex = products.findIndex(p => p.id === productId);
    
    if (productIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    const { name, description, price, category, stock } = req.body;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è
    if (name !== undefined) products[productIndex].name = name;
    if (description !== undefined) products[productIndex].description = description;
    if (price !== undefined) products[productIndex].price = parseFloat(price);
    if (category !== undefined) products[productIndex].category = category;
    if (stock !== undefined) products[productIndex].stock = parseInt(stock);
    
    res.json({
        success: true,
        message: '–¢–æ–≤–∞—Ä –æ–±–Ω–æ–≤–ª–µ–Ω',
        data: products[productIndex]
    });
});

// DELETE /products/:id - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
app.delete('/products/:id', (req, res) => {
    const productId = parseInt(req.params.id);
    const productIndex = products.findIndex(p => p.id === productId);
    
    if (productIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    const deletedProduct = products.splice(productIndex, 1)[0];
    
    // –£–¥–∞–ª—è–µ–º —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
    cart = cart.filter(item => item.productId !== productId);
    
    res.json({
        success: true,
        message: '–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω',
        data: deletedProduct
    });
});

// GET /cart - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
app.get('/cart', (req, res) => {
    const cartWithProducts = cart.map(item => {
        const product = products.find(p => p.id === item.productId);
        return {
            ...item,
            product: product ? {
                name: product.name,
                price: product.price,
                category: product.category
            } : null
        };
    });
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    res.json({
        success: true,
        data: {
            items: cartWithProducts,
            total: total.toFixed(2),
            itemCount: cart.length
        }
    });
});

// POST /cart/items - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
app.post('/cart/items', (req, res) => {
    const { productId, quantity = 1 } = req.body;
    
    const product = products.find(p => p.id === productId);
    if (!product) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    if (product.stock < quantity) {
        return res.status(400).json({
            success: false,
            message: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ'
        });
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    const existingItem = cart.find(item => item.productId === productId);
    
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cart.push({
            id: cart.length + 1,
            productId,
            quantity,
            price: product.price
        });
    }
    
    res.json({
        success: true,
        message: '–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É',
        data: cart
    });
});

// PUT /cart/items/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
app.put('/cart/items/:id', (req, res) => {
    const itemId = parseInt(req.params.id);
    const { quantity } = req.body;
    
    const item = cart.find(i => i.id === itemId);
    if (!item) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    const product = products.find(p => p.id === item.productId);
    if (product.stock < quantity) {
        return res.status(400).json({
            success: false,
            message: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ'
        });
    }
    
    item.quantity = quantity;
    
    res.json({
        success: true,
        message: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ',
        data: item
    });
});

// DELETE /cart/items/:id - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
app.delete('/cart/items/:id', (req, res) => {
    const itemId = parseInt(req.params.id);
    const itemIndex = cart.findIndex(i => i.id === itemId);
    
    if (itemIndex === -1) {
        return res.status(404).json({
            success: false,
            message: '–¢–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ –Ω–µ –Ω–∞–π–¥–µ–Ω'
        });
    }
    
    const deletedItem = cart.splice(itemIndex, 1)[0];
    
    res.json({
        success: true,
        message: '–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã',
        data: deletedItem
    });
});

// POST /orders - –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
app.post('/orders', (req, res) => {
    if (cart.length === 0) {
        return res.status(400).json({
            success: false,
            message: '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'
        });
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ
    for (const item of cart) {
        const product = products.find(p => p.id === item.productId);
        if (product.stock < item.quantity) {
            return res.status(400).json({
                success: false,
                message: `–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ "${product.name}" –Ω–∞ —Å–∫–ª–∞–¥–µ`
            });
        }
    }
    
    // –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑
    const order = {
        id: nextOrderId++,
        items: [...cart],
        total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
        status: 'pending',
        createdAt: new Date()
    };
    
    orders.push(order);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
    for (const item of cart) {
        const product = products.find(p => p.id === item.productId);
        product.stock -= item.quantity;
    }
    
    // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    cart = [];
    
    res.status(201).json({
        success: true,
        message: '–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω',
        data: order
    });
});

// GET /orders - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
app.get('/orders', (req, res) => {
    res.json({
        success: true,
        count: orders.length,
        data: orders
    });
});

// GET /stats/sales - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
app.get('/stats/sales', (req, res) => {
    const totalOrders = orders.length;
    const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
    const averageOrderValue = totalOrders > 0 ? totalRevenue / totalOrders : 0;
    
    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    const categoryStats = {};
    orders.forEach(order => {
        order.items.forEach(item => {
            const product = products.find(p => p.id === item.productId);
            if (product) {
                if (!categoryStats[product.category]) {
                    categoryStats[product.category] = { count: 0, revenue: 0 };
                }
                categoryStats[product.category].count += item.quantity;
                categoryStats[product.category].revenue += item.price * item.quantity;
            }
        });
    });
    
    res.json({
        success: true,
        data: {
            totalOrders,
            totalRevenue: totalRevenue.toFixed(2),
            averageOrderValue: averageOrderValue.toFixed(2),
            categoryStats
        }
    });
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({
        success: false,
        message: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'
    });
});

app.listen(PORT, () => {
    console.log(`üöÄ E-commerce API –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
    console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:');
    console.log('   GET    /products - –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π');
    console.log('   GET    /products/:id - —Ç–æ–≤–∞—Ä –ø–æ ID');
    console.log('   POST   /products - —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä');
    console.log('   PUT    /products/:id - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä');
    console.log('   DELETE /products/:id - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä');
    console.log('   GET    /cart - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É');
    console.log('   POST   /cart/items - –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É');
    console.log('   PUT    /cart/items/:id - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ');
    console.log('   DELETE /cart/items/:id - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã');
    console.log('   POST   /orders - –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑');
    console.log('   GET    /orders - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã');
    console.log('   GET    /stats/sales - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂');
});

module.exports = app;
```

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å–æ–∑–¥–∞–Ω–∏—è RESTful API —Å Express.js –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---
