# ‚ùì –°–æ–±—ã—Ç–∏–π–Ω–æ‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Node.js

**–°–æ–±—ã—Ç–∏–π–Ω–æ‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (Event‚ÄëDriven Programming)** ‚Äî –ø–æ–¥—Ö–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ –≤–æ–∫—Ä—É–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π. –í Node.js —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å, –ª–µ–∂–∞—â–∞—è –≤ –æ—Å–Ω–æ–≤–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ I/O.

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### üìå –°–æ–±—ã—Ç–∏—è –∏ —Å–ª—É—à–∞—Ç–µ–ª–∏
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è (HTTP‚Äë–∑–∞–ø—Ä–æ—Å, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ WebSocket). –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Å–ª—É—à–∞—Ç–µ–ª—å (callback), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è.

### üìå –°–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª (Event Loop)
–°–µ—Ä–¥—Ü–µ Node.js ‚Äî —Ü–∏–∫–ª, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á (—Ç–∞–π–º–µ—Ä—ã, I/O callbacks, `setImmediate`, microtasks Promises). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

### üìå –≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ EventEmitter
–ë–∞–∑–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–±—ã—Ç–∏–π ‚Äî –∫–ª–∞—Å—Å `EventEmitter`. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç ¬´—ç–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –∞ –¥—Ä—É–≥–∏–µ ‚Äî –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å.

### üìå –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O
–ü–æ–∫–∞ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è I/O –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.

---

## ‚úç –ü—Ä–∏–º–µ—Ä: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ EventEmitter

```javascript
const EventEmitter = require('events');
const bus = new EventEmitter();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π
bus.on('user:login', (userId) => {
  console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à—ë–ª:', userId);
});

bus.once('app:ready', () => {
  console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å)');
});

// –≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π
bus.emit('app:ready');
bus.emit('app:ready'); // –ø–æ–≤—Ç–æ—Ä –Ω–µ –≤—ã–∑–æ–≤–µ—Ç once‚Äë—Å–ª—É—à–∞—Ç–µ–ª—å
bus.emit('user:login', 42);
```

---

## ‚úç –ü—Ä–∏–º–µ—Ä: HTTP‚Äë—Å–µ—Ä–≤–µ—Ä –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

```javascript
const http = require('http');

const server = http.createServer((req, res) => {
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞ (—Ç–∞–∫–∂–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ 'request')
  res.writeHead(200, { 'Content-Type': 'text/plain; charset=utf-8' });
  res.end('Hello, World!\n');
});

server.on('request', (req) => {
  console.log(`–ó–∞–ø—Ä–æ—Å: ${req.method} ${req.url}`);
});

server.on('listening', () => {
  console.log('–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3000');
});

server.on('error', (err) => {
  console.error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:', err);
});

server.listen(3000);
```

---

## üîπ –ö–æ—Ä–æ—Ç–∫–æ –æ —Ñ–∞–∑–∞—Ö Event Loop

- Macrotasks: `setTimeout`, `setInterval`, I/O callbacks, `setImmediate`
- Microtasks: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `Promise` (`.then/.catch/.finally`), `queueMicrotask`
- –ü–æ—Ä—è–¥–æ–∫: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ ‚Üí microtasks ‚Üí —Å–ª–µ–¥—É—é—â–∞—è macrotask‚Äë—Ñ–∞–∑–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

```javascript
console.log('sync');
setTimeout(() => console.log('timeout'), 0);
Promise.resolve().then(() => console.log('microtask'));
setImmediate(() => console.log('immediate'));
```

---

## ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

- –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ `'error'` —É —ç–º–∏—Ç—Ç–µ—Ä–æ–≤/—Å—Ç—Ä–∏–º–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `once` –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ —Å–ª—É—à–∞—Ç–µ–ª–µ–π
- –ù–µ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ —Ç—è–∂—ë–ª—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–ª—É—à–∞—Ç–µ–ª—è—Ö ‚Äî –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ –≤–æ—Ä–∫–µ—Ä—ã/–æ—á–µ—Ä–µ–¥–∏
- –î–ª—è –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Streams –∏ backpressure (`.pipe`, `readableFlowing`)
- –£–¥–∞–ª—è–π—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: `emitter.off(event, handler)`
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –æ—Ç–∫–∞–∑—ã, —Ç–∞–π–º–∞—É—Ç—ã)

---

## üîπ –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- –†–µ–∞–ª‚Äë—Ç–∞–π–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: —á–∞—Ç—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ç—Ä–µ–∫–∏–Ω–≥
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö: —Ñ–∞–π–ª—ã, –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞, –ø—Ä–æ–∫—Å–∏
- API‚Äë—à–ª—é–∑—ã, –±—Ä–æ–∫–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

---

## üéØ –ò—Ç–æ–≥

- –°–æ–±—ã—Ç–∏—è –∏ Event Loop –¥–µ–ª–∞—é—Ç Node.js —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –¥–ª—è I/O
- `EventEmitter` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–µ–∫—É–ø–ª–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–∞–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ backpressure –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏: `EventEmitter, once/off, Event Loop, Streams`

---

### üìå –ó–∞–¥–∞—á–∞ 1: –°—á—ë—Ç—á–∏–∫ —Å–ª—É—à–∞—Ç–µ–ª–µ–π
–°–æ–∑–¥–∞–π—Ç–µ —ç–º–∏—Ç—Ç–µ—Ä, –ø–æ–≤–µ—Å—å—Ç–µ 3 —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `tick`, —ç–º–∏—Ç–∏—Ä—É–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ 2 —Ä–∞–∑–∞, –∑–∞—Ç–µ–º —Å–Ω–∏–º–∏—Ç–µ –æ–¥–∏–Ω —Å–ª—É—à–∞—Ç–µ–ª—å –∏ —ç–º–∏—Ç–∏—Ä—É–π—Ç–µ –µ—â—ë —Ä–∞–∑. –í—ã–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ª—É—à–∞—Ç–µ–ª–µ–π.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

–®–∞–≥–∏:
1) –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `listeners.js` –∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä
```javascript
const EventEmitter = require('events');
const bus = new EventEmitter();

const h1 = () => console.log('h1');
const h2 = () => console.log('h2');
const h3 = () => console.log('h3');

bus.on('tick', h1);
bus.on('tick', h2);
bus.on('tick', h3);

bus.emit('tick');
bus.emit('tick');

bus.off('tick', h2);

console.log('listeners:', bus.listenerCount('tick'));
bus.emit('tick');
```

2) –ó–∞–ø—É—Å—Ç–∏—Ç–µ
```bash
node listeners.js
```
–û–∂–∏–¥–∞–µ–º–æ: –¥–≤–∞ –∑–∞–ø—É—Å–∫–∞ –ø–æ —Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞, –∑–∞—Ç–µ–º –≤—ã–≤–æ–¥ `listeners: 2` –∏ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ –ø–æ –¥–≤—É–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
–ò—Å–ø–æ–ª—å–∑—É—è `once`, –¥–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–±—ã—Ç–∏—è `ready`, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∑–∞–ø—Ä–µ—Ç–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

–®–∞–≥–∏:
1) –†–µ–∞–ª–∏–∑—É–π—Ç–µ –æ–∂–∏–¥–∞—é—â—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
```javascript
const { once, EventEmitter } = require('events');

async function bootstrap() {
  const bus = new EventEmitter();
  setTimeout(() => bus.emit('ready'), 100);
  await once(bus, 'ready');
  console.log('init done');
}

bootstrap();
```

2) –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —ç–º–∏—Å—Å–∏—è –Ω–µ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É. (–ú–æ–∂–Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –∂–¥—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑.)

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –ü–æ—Ä—è–¥–æ–∫ Event Loop
–í—ã–≤–µ–¥–∏—Ç–µ –æ–∂–∏–¥–∞–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: sync ‚Üí microtask ‚Üí timeout/immediate (–≤–æ–∑–º–æ–∂–Ω—ã –Ω—é–∞–Ω—Å—ã —Å—Ä–µ–¥—ã), –ø–æ—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// order.js
console.log('sync');
setTimeout(() => console.log('timeout'), 0);
Promise.resolve().then(() => console.log('microtask'));
setImmediate(() => console.log('immediate'));
```

–ó–∞–ø—É—Å–∫:
```bash
node order.js | cat
```

Microtasks –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π macrotask‚Äë—Ñ–∞–∑–µ, –ø–æ—Ç–æ–º—É `microtask` –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ —Ç–∞–π–º–µ—Ä–æ–≤/`immediate`.

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: –ü–æ—Ç–æ–∫–∏ –∏ backpressure
–°—á–∏—Ç–∞–π—Ç–µ –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª –ø–æ—Ç–æ–∫–æ–≤–æ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–ª–∏–µ–Ω—Ç—É, –∏—Å–ø–æ–ª—å–∑—É—è `.pipe`, –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ `error` –∏ `close`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
project/
  server.js
  big.mp4
```

–ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
const http = require('http');
const fs = require('fs');

http.createServer((req, res) => {
  if (req.url === '/video') {
    const stream = fs.createReadStream('big.mp4');
    stream.on('error', (e) => {
      res.writeHead(500);
      res.end('read error');
    });
    res.on('close', () => stream.destroy());
    res.writeHead(200, { 'Content-Type': 'video/mp4' });
    stream.pipe(res);
  } else {
    res.writeHead(404).end();
  }
}).listen(3001, () => console.log('http://localhost:3001/video'));
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ —á–µ—Ä–µ–∑ `curl --output /dev/null http://localhost:3001/video`.

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —ç–º–∏—Ç—Ç–µ—Ä–∞
–°—ã–º–∏—Ç–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫—É —É `EventEmitter` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –µ—ë, —á—Ç–æ–±—ã –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ —É–ø–∞–ª.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// emitter-error.js
const EventEmitter = require('events');
const bus = new EventEmitter();

bus.on('error', (err) => {
  console.error('handled error:', err.message);
});

bus.emit('error', new Error('boom'));
console.log('still alive');
```

–ó–∞–ø—É—Å–∫: `node emitter-error.js` ‚Äî –æ–∂–∏–¥–∞–µ–º–æ, –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –∞–≤–∞—Ä–∏–π–Ω–æ.

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 6: –¢–∞–π–º–∞—É—Ç –∫–∞–∫ —Å–æ–±—ã—Ç–∏–µ
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `wait(ms)`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é `Promise`, –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —ç–º–∏—Å—Å–∏–∏ —Å–æ–±—ã—Ç–∏–π `tick`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
// tick-wait.js
const EventEmitter = require('events');
const bus = new EventEmitter();

const wait = (ms) => new Promise((r) => setTimeout(r, ms));

bus.on('tick', (n) => console.log('tick', n));

(async () => {
  for (let i = 1; i <= 3; i++) {
    await wait(200);
    bus.emit('tick', i);
  }
})();
```

–ó–∞–ø—É—Å–∫: `node tick-wait.js` ‚Äî –æ–∂–∏–¥–∞–µ–º–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ `tick 1`, `tick 2`, `tick 3` —Å –ø–∞—É–∑–∞–º–∏ ~200–º—Å.

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å EventEmitter, Event Loop –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ—Ç–æ–∫–æ–≤ –≤ Node.js.

---


