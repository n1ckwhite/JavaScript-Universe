# üìå useImperativeHandle –∏ useDebugValue

**useImperativeHandle** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–π —á–µ—Ä–µ–∑ `ref` (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `React.forwardRef`).

**useDebugValue** ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –ø–æ–¥–ø–∏—Å—å –≤ React DevTools –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤.

---

## üîπ useImperativeHandle

### üìå –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ, —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ –≤–Ω–µ—à–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `ref`.
- –°–ø—Ä—è—Ç–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ –≤ `forwardRef`.

### üìå –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```jsx
useImperativeHandle(ref, () => ({ /* –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã/—Å–≤–æ–π—Å—Ç–≤–∞ */ }), [deps]);
```

---

## üîπ useDebugValue

### üìå –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?
- –ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ö—É–∫–∏ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Ö —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ DevTools.
- –ú–æ–∂–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è.

### üìå –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```jsx
useDebugValue(value);
useDebugValue(value, v => `State: ${v}`);
```

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏: `useImperativeHandle`, `useDebugValue`

---

### üìå –ó–∞–¥–∞—á–∞ 1: –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤–≤–æ–¥–∞
–°–¥–µ–ª–∞–π—Ç–µ —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–µ—Ç–æ–¥—ã `focus()` –∏ `clear()` –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∏–∑–≤–Ω–µ —á–µ—Ä–µ–∑ `ref`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useRef, forwardRef, useImperativeHandle } from 'react';

const CustomInput = forwardRef((props, ref) => {
  const inputRef = useRef(null);

  useImperativeHandle(ref, () => ({
    focus: () => inputRef.current?.focus(),
    clear: () => { if (inputRef.current) inputRef.current.value = ''; }
  }), []);

  return <input ref={inputRef} {...props} />;
});

export default function App() {
  const inputRef = useRef(null);

  return (
    <div>
      <CustomInput ref={inputRef} placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" />
      <button onClick={() => inputRef.current?.focus()}>–§–æ–∫—É—Å</button>
      <button onClick={() => inputRef.current?.clear()}>–û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –ú–æ–¥–∞–ª–∫–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ ref
–û—Ç–∫—Ä–æ–π—Ç–µ/–∑–∞–∫—Ä–æ–π—Ç–µ –º–æ–¥–∞–ª–∫—É –º–µ—Ç–æ–¥–∞–º–∏ `open()` –∏ `close()`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';

const Modal = forwardRef((props, ref) => {
  const [open, setOpen] = useState(false);

  useImperativeHandle(ref, () => ({
    open: () => setOpen(true),
    close: () => setOpen(false)
  }), []);

  if (!open) return null;

  return (
    <div className="modal">
      <div className="modal__content">
        <h3>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</h3>
        <button onClick={() => setOpen(false)}>–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  );
});

export default function App() {
  const modalRef = useRef(null);

  return (
    <div>
      <button onClick={() => modalRef.current?.open()}>–û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É</button>
      <Modal ref={modalRef} />
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: useDebugValue –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞
–ü–æ–∫–∞–∂–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ DevTools –¥–ª—è —Ö—É–∫–∞ `useToggle`.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState, useDebugValue } from 'react';

function useToggle(initial = false) {
  const [on, setOn] = useState(initial);
  useDebugValue(on ? 'ON' : 'OFF');
  return { on, toggle: () => setOn(v => !v) };
}

export default function App() {
  const { on, toggle } = useToggle();
  return <button onClick={toggle}>{on ? '–í–∫–ª—é—á–µ–Ω–æ' : '–í—ã–∫–ª—é—á–µ–Ω–æ'}</button>;
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ useDebugValue
–û—Ç–æ–±—Ä–∞–∂–∞–π—Ç–µ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤ DevTools.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState, useDebugValue, useEffect } from 'react';

function useConnectionStatus() {
  const [online, setOnline] = useState(navigator.onLine);
  useEffect(() => {
    const on = () => setOnline(true);
    const off = () => setOnline(false);
    window.addEventListener('online', on);
    window.addEventListener('offline', off);
    return () => {
      window.removeEventListener('online', on);
      window.removeEventListener('offline', off);
    };
  }, []);
  useDebugValue(online, v => (v ? '‚úÖ Online' : '‚ùå Offline'));
  return online;
}

export default function App() {
  const online = useConnectionStatus();
  return <div>–°–µ—Ç—å: {online ? 'Online' : 'Offline'}</div>;
}
```

</details>

---

üéâ –≠—Ç–∏ –º–∏–Ω–∏-–∑–∞–¥–∞—á–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `useImperativeHandle` –∏ –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤ —á–µ—Ä–µ–∑ `useDebugValue`.

---
