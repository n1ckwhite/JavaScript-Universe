# üìå –°–º–µ–Ω–∞ `key`: —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

–ò–∑–º–µ–Ω–µ–Ω–∏–µ `key` —É —ç–ª–µ–º–µ–Ω—Ç–∞/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–æ–æ–±—â–∞–µ—Ç React, —á—Ç–æ —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä. –°—Ç–∞—Ä—ã–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –Ω–æ–≤—ã–π ‚Äî –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å –Ω—É–ª—è. –≠—Ç–æ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∞ –∑–∞–º–µ–Ω–∞ —É–∑–ª–∞.

---

## üîπ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ `key`

- –°—Ç–∞—Ä—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —É–¥–∞–ª—è–µ—Ç—Å—è (–≤—ã–∑–æ–≤—ã –æ—á–∏—Å—Ç–æ–∫ –∏ `componentWillUnmount`).
- –ù–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–Ω–æ–≤–æ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä/—ç—Ñ—Ñ–µ–∫—Ç—ã, `componentDidMount`).
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ä–µ—Ñ—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç–µ—Ä—è—é—Ç—Å—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ.
- DOM-—É–∑–µ–ª –∑–∞–º–µ–Ω—è–µ—Ç—Å—è: —Ñ–æ–∫—É—Å/—Å–∫—Ä–æ–ª–ª/–ø–æ–∑–∏—Ü–∏—è caret –º–æ–≥—É—Ç —Å–±—Ä–æ—Å–∏—Ç—å—Å—è.

---

## üîπ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

### –ö–ª–∞—Å—Å–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –°—Ç–∞—Ä—ã–π: `componentWillUnmount`
- –ù–æ–≤—ã–π: `constructor` ‚Üí `static getDerivedStateFromProps?` ‚Üí `render` ‚Üí `componentDidMount`
- `componentDidUpdate` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (–Ω–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Äî —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –°—Ç–∞—Ä—ã–π: –≤—ã–∑–æ–≤—ã `cleanup` —É –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö `useLayoutEffect` –∏ `useEffect`, –∑–∞—Ç–µ–º —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–æ–≤—ã–π: —Ç–µ–ª–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Üí `useLayoutEffect` ‚Üí –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ ‚Üí `useEffect`

---

## üîπ –ó–∞—á–µ–º –º–µ–Ω—è—Ç—å `key`

- **–°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è** —Å–ª–æ–∂–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞/—Ñ–æ—Ä–º—ã –æ–¥–Ω–∏–º –¥–µ–π—Å—Ç–≤–∏–µ–º
- **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏** –∏–ª–∏ —à–∞–≥–æ–≤ –º–∞—Å—Ç–µ—Ä–∞
- **–ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

–ö–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–∏—Ç: –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—Å–æ–≤/—Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî —ç—Ç–æ –¥–æ—Ä–æ–∂–µ –∏ –ª–æ–º–∞–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å UI.

---

## üîπ –ü—Ä–∞–≤–∏–ª–∞ –∫–ª—é—á–µ–π –≤ —Å–ø–∏—Å–∫–∞—Ö

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `id`, –∞ –Ω–µ –∏–Ω–¥–µ–∫—Å—ã –º–∞—Å—Å–∏–≤–∞
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ `key`, –ø–æ–∫–∞ —ç–ª–µ–º–µ–Ω—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ç–æ—Ç –∂–µ; –º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–π –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏: `—Å–º–µ–Ω–∞ key`

---

### üìå –ó–∞–¥–∞—á–∞ 1: –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ —Å–º–µ–Ω—É key
–°–±—Ä–æ—Å—å—Ç–µ —Ñ–æ—Ä–º—É –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é, –∏–∑–º–µ–Ω–∏–≤ `key` –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—ã.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState } from 'react';

function Form() {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  return (
    <form>
      <input value={name} onChange={e => setName(e.target.value)} placeholder="–ò–º—è" />
      <input value={email} onChange={e => setEmail(e.target.value)} placeholder="Email" />
    </form>
  );
}

export default function FormContainer() {
  const [version, setVersion] = useState(0);
  return (
    <div>
      <button onClick={() => setVersion(v => v + 1)}>–°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É</button>
      <Form key={version} />
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
–°–º–µ–Ω–∏—Ç–µ `key`, —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–ª–∞—Å—å –∑–∞–Ω–æ–≤–æ.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState } from 'react';

function AnimatedBox() {
  return (
    <div style={{
      width: 100,
      height: 100,
      background: 'tomato',
      animation: 'spin 1s linear'
    }} />
  );
}

export default function Replay() {
  const [k, setK] = useState(0);
  return (
    <div>
      <button onClick={() => setK(k + 1)}>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      <AnimatedBox key={k} />
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–∫–ª–∞—Å—Å—ã)
–ü–æ–∫–∞–∂–∏—Ç–µ –ª–æ–≥–∏ `unmount ‚Üí mount` –ø—Ä–∏ —Å–º–µ–Ω–µ `key` —É –∫–ª–∞—Å—Å–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { Component, useState } from 'react';

class LifeDemo extends Component {
  componentDidMount() { console.log('mount'); }
  componentWillUnmount() { console.log('unmount'); }
  render() { return <div>key: {this.props.k}</div>; }
}

export default function App() {
  const [k, setK] = useState(1);
  return (
    <div>
      <button onClick={() => setK(k + 1)}>Change key</button>
      <LifeDemo key={k} k={k} />
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å/–ø–æ—Ç–µ—Ä—è—Ç—å —Ñ–æ–∫—É—Å –ø—Ä–∏ —Å–º–µ–Ω–µ key
–ü–æ–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —Å–º–µ–Ω–∞ `key` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ñ–æ–∫—É—Å –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–≥–æ –∏–Ω–ø—É—Ç–∞.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useState, useRef, useEffect } from 'react';

function Uncontrolled() {
  const ref = useRef(null);
  useEffect(() => { ref.current?.focus(); }, []);
  return <input ref={ref} placeholder="–ü–µ—á–∞—Ç–∞–π—Ç–µ, –∑–∞—Ç–µ–º —Å–º–µ–Ω–∏—Ç–µ key" />;
}

export default function Demo() {
  const [k, setK] = useState(0);
  return (
    <div>
      <button onClick={() => setK(k + 1)}>–°–º–µ–Ω–∏—Ç—å key</button>
      <Uncontrolled key={k} />
    </div>
  );
}
```

</details>

---

üéâ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- –°–º–µ–Ω–∞ `key` = –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –µ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–±—Ä–æ—Å–∞/–ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏; –Ω–µ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
- –í —Å–ø–∏—Å–∫–∞—Ö ‚Äî –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –º–∞—Å—Å–∏–≤–∞.

---