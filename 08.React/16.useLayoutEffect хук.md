# üìå useLayoutEffect —Ö—É–∫

**useLayoutEffect** ‚Äî —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM, –Ω–æ –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –±—Ä–∞—É–∑–µ—Ä–æ–º. –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è:
- –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤/–ø–æ–∑–∏—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤;
- —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π;
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–µ—Ä—Ü–∞–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

---

## üîπ –û—Ç–ª–∏—á–∏—è –æ—Ç useEffect

| –ö—Ä–∏—Ç–µ—Ä–∏–π | useEffect | useLayoutEffect |
|----------|-----------|-----------------|
| **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ | –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä | –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä |
| **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** | API, –ø–æ–¥–ø–∏—Å–∫–∏, —Ç–∞–π–º–µ—Ä—ã | –ò–∑–º–µ—Ä–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞ —Å DOM |

---

## üîπ –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```jsx
useLayoutEffect(() => {
  // –ª–æ–≥–∏–∫–∞
}, [deps]);
```

- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ DOM-–º—É—Ç–∞—Ü–∏–π.
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

---

## üîπ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

- –ò–∑–º–µ—Ä–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–æ–≤.
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –º–µ—Ä—Ü–∞–Ω–∏–π.

**‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ** ‚Äî –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É.

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏: `useLayoutEffect`

---

### üìå –ó–∞–¥–∞—á–∞ 1: –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–∞
–ò–∑–º–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useLayoutEffect, useRef, useState } from 'react';

function MeasureBox() {
  const boxRef = useRef(null);
  const [size, setSize] = useState({ width: 0, height: 0 });

  useLayoutEffect(() => {
    const { width, height } = boxRef.current.getBoundingClientRect();
    setSize({ width, height });
  }, []);

  return (
    <div>
      <div
        ref={boxRef}
        style={{ width: '200px', height: '100px', background: 'lightblue' }}
      >
        –≠–ª–µ–º–µ–Ω—Ç
      </div>
      <p>–†–∞–∑–º–µ—Ä: {size.width}√ó{size.height}px</p>
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞
–ò–∑–º–µ–Ω–∏—Ç–µ —Ü–≤–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–∞, –µ—Å–ª–∏ –µ–≥–æ —à–∏—Ä–∏–Ω–∞ –±–æ–ª—å—à–µ 150px.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useLayoutEffect, useRef, useState } from 'react';

function ColorBySize() {
  const boxRef = useRef(null);
  const [color, setColor] = useState('lightblue');

  useLayoutEffect(() => {
    if (boxRef.current.offsetWidth > 150) {
      setColor('lightgreen');
    }
  }, []);

  return (
    <div
      ref={boxRef}
      style={{
        width: '200px',
        height: '100px',
        background: color,
        transition: 'background 0.3s'
      }}
    >
      –≠–ª–µ–º–µ–Ω—Ç
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å useEffect
–ü–æ–∫–∞–∂–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É useEffect –∏ useLayoutEffect.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useLayoutEffect, useEffect, useRef, useState } from 'react';

function Comparison() {
  const boxRef = useRef(null);
  const [layoutColor, setLayoutColor] = useState('lightblue');
  const [effectColor, setEffectColor] = useState('lightblue');

  useLayoutEffect(() => {
    console.log('useLayoutEffect - –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏');
    setLayoutColor('lightgreen');
  }, []);

  useEffect(() => {
    console.log('useEffect - –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏');
    setEffectColor('lightcoral');
  }, []);

  return (
    <div>
      <div
        ref={boxRef}
        style={{
          width: '200px',
          height: '100px',
          background: layoutColor,
          margin: '10px'
        }}
      >
        useLayoutEffect
      </div>
      <div
        style={{
          width: '200px',
          height: '100px',
          background: effectColor,
          margin: '10px'
        }}
      >
        useEffect
      </div>
    </div>
  );
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
–†–∞—Å–ø–æ–ª–æ–∂–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞.

<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```jsx
import React, { useLayoutEffect, useRef, useState } from 'react';

function CenteredBox() {
  const boxRef = useRef(null);
  const [position, setPosition] = useState({ top: 0, left: 0 });

  useLayoutEffect(() => {
    const box = boxRef.current;
    const { width, height } = box.getBoundingClientRect();
    
    setPosition({
      top: (window.innerHeight - height) / 2,
      left: (window.innerWidth - width) / 2
    });
  }, []);

  return (
    <div
      ref={boxRef}
      style={{
        position: 'fixed',
        top: position.top,
        left: position.left,
        width: '200px',
        height: '100px',
        background: 'lightblue',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center'
      }}
    >
      –ü–æ —Ü–µ–Ω—Ç—Ä—É
    </div>
  );
}
```

</details>

---

üéâ –≠—Ç–∏ –º–∏–Ω–∏-–∑–∞–¥–∞—á–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–µ–π—Å—ã `useLayoutEffect` ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `useEffect` –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

---