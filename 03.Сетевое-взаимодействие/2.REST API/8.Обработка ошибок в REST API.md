# üìå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ REST API: –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ REST API ‚Äî –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –∏ –∫–∞–∫ –æ–Ω–∏ –º–æ–≥—É—Ç —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### 1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤**

REST API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞.

#### ‚úç –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã –æ—à–∏–±–æ–∫:

**4xx ‚Äî –û—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞:**
- **400 Bad Request** ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **401 Unauthorized** ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **403 Forbidden** ‚Äî –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **404 Not Found** ‚Äî —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **409 Conflict** ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **422 Unprocessable Entity** ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**5xx ‚Äî –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
- **500 Internal Server Error** ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **502 Bad Gateway** ‚Äî –æ—à–∏–±–∫–∞ —à–ª—é–∑–∞
- **503 Service Unavailable** ‚Äî —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ**

–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ –ø–æ–º–æ–≥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏.

#### ‚úç –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:
```json
{
  "status": 404,
  "error": "Not Found",
  "message": "User with id 123 not found",
  "timestamp": "2023-10-01T12:00:00Z",
  "path": "/api/users/123",
  "details": {
    "field": "id",
    "value": "123"
  }
}
```

#### ‚úç –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:
```json
{
  "status": 400,
  "error": "Bad Request",
  "message": "Validation failed",
  "timestamp": "2023-10-01T12:00:00Z",
  "path": "/api/users",
  "errors": [
    {
      "field": "email",
      "message": "Email is required",
      "code": "REQUIRED"
    },
    {
      "field": "age",
      "message": "Age must be between 18 and 100",
      "code": "RANGE",
      "min": 18,
      "max": 100
    }
  ]
}
```

---

## üîπ –¢–∏–ø—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 1. **–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (400 Bad Request)**

#### ‚úç –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:
```javascript
// Middleware –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
const validateUser = (req, res, next) => {
  const { name, email, age } = req.body;
  const errors = [];
  
  if (!name || name.trim().length < 2) {
    errors.push({
      field: 'name',
      message: 'Name must be at least 2 characters long',
      code: 'MIN_LENGTH'
    });
  }
  
  if (!email || !email.includes('@')) {
    errors.push({
      field: 'email',
      message: 'Valid email is required',
      code: 'INVALID_EMAIL'
    });
  }
  
  if (age && (age < 18 || age > 100)) {
    errors.push({
      field: 'age',
      message: 'Age must be between 18 and 100',
      code: 'RANGE',
      min: 18,
      max: 100
    });
  }
  
  if (errors.length > 0) {
    return res.status(400).json({
      status: 400,
      error: 'Bad Request',
      message: 'Validation failed',
      timestamp: new Date().toISOString(),
      path: req.originalUrl,
      errors: errors
    });
  }
  
  next();
};
```

#### ‚úç –û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É:
```json
{
  "status": 400,
  "error": "Bad Request",
  "message": "Validation failed",
  "timestamp": "2023-10-01T12:00:00Z",
  "path": "/api/users",
  "errors": [
    {
      "field": "email",
      "message": "Valid email is required",
      "code": "INVALID_EMAIL"
    },
    {
      "field": "age",
      "message": "Age must be between 18 and 100",
      "code": "RANGE",
      "min": 18,
      "max": 100
    }
  ]
}
```

### 2. **–û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401 Unauthorized)**

#### ‚úç –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```javascript
// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
const authenticate = (req, res, next) => {
  const token = req.headers.authorization?.replace('Bearer ', '');
  
  if (!token) {
    return res.status(401).json({
      status: 401,
      error: 'Unauthorized',
      message: 'Authentication token is required',
      timestamp: new Date().toISOString(),
      path: req.originalUrl
    });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({
      status: 401,
      error: 'Unauthorized',
      message: 'Invalid or expired token',
      timestamp: new Date().toISOString(),
      path: req.originalUrl
    });
  }
};
```

### 3. **–û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (403 Forbidden)**

#### ‚úç –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
```javascript
// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
const checkPermission = (permission) => {
  return (req, res, next) => {
    const user = req.user;
    
    if (!user.permissions.includes(permission)) {
      return res.status(403).json({
        status: 403,
        error: 'Forbidden',
        message: `Access denied. Required permission: ${permission}`,
        timestamp: new Date().toISOString(),
        path: req.originalUrl,
        required_permission: permission
      });
    }
    
    next();
  };
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
app.delete('/api/users/:id', 
  authenticate, 
  checkPermission('DELETE_USERS'), 
  deleteUser
);
```

### 4. **–û—à–∏–±–∫–∏ "–ù–µ –Ω–∞–π–¥–µ–Ω–æ" (404 Not Found)**

#### ‚úç –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:
```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.get('/api/users/:id', async (req, res) => {
  try {
    const user = await User.findById(req.params.id);
    
    if (!user) {
      return res.status(404).json({
        status: 404,
        error: 'Not Found',
        message: `User with id ${req.params.id} not found`,
        timestamp: new Date().toISOString(),
        path: req.originalUrl,
        resource_id: req.params.id
      });
    }
    
    res.json(user);
  } catch (error) {
    next(error);
  }
});
```

### 5. **–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (409 Conflict)**

#### ‚úç –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.post('/api/users', async (req, res) => {
  try {
    const { email } = req.body;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email
    const existingUser = await User.findOne({ email });
    
    if (existingUser) {
      return res.status(409).json({
        status: 409,
        error: 'Conflict',
        message: 'User with this email already exists',
        timestamp: new Date().toISOString(),
        path: req.originalUrl,
        conflicting_field: 'email',
        conflicting_value: email
      });
    }
    
    const newUser = await User.create(req.body);
    res.status(201).json(newUser);
  } catch (error) {
    next(error);
  }
});
```

---

## üîπ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. **Express.js Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

#### ‚úç –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫:
```javascript
// Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
  console.error('Error:', err);
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–¥
  let status = 500;
  let message = 'Internal Server Error';
  
  if (err.name === 'ValidationError') {
    status = 400;
    message = 'Validation Error';
  } else if (err.name === 'CastError') {
    status = 400;
    message = 'Invalid ID format';
  } else if (err.code === 11000) {
    status = 409;
    message = 'Duplicate key error';
  } else if (err.name === 'JsonWebTokenError') {
    status = 401;
    message = 'Invalid token';
  } else if (err.name === 'TokenExpiredError') {
    status = 401;
    message = 'Token expired';
  }
  
  // –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ
  const errorResponse = {
    status: status,
    error: message,
    message: err.message || message,
    timestamp: new Date().toISOString(),
    path: req.originalUrl
  };
  
  // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  if (process.env.NODE_ENV === 'development') {
    errorResponse.stack = err.stack;
  }
  
  res.status(status).json(errorResponse);
});
```

### 2. **–ö–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫**

#### ‚úç –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ—à–∏–±–æ–∫:
```javascript
// –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏
class AppError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.statusCode = statusCode;
    this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';
    this.isOperational = true;
    
    Error.captureStackTrace(this, this.constructor);
  }
}

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
class ValidationError extends AppError {
  constructor(message, errors = []) {
    super(message, 400);
    this.errors = errors;
  }
}

class NotFoundError extends AppError {
  constructor(resource, id) {
    super(`${resource} with id ${id} not found`, 404);
    this.resource = resource;
    this.id = id;
  }
}

class ConflictError extends AppError {
  constructor(message, field, value) {
    super(message, 409);
    this.field = field;
    this.value = value;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
app.get('/api/users/:id', async (req, res, next) => {
  try {
    const user = await User.findById(req.params.id);
    
    if (!user) {
      throw new NotFoundError('User', req.params.id);
    }
    
    res.json(user);
  } catch (error) {
    next(error);
  }
});
```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫**

#### ‚úç Async/await wrapper:
```javascript
// Wrapper –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
const asyncHandler = (fn) => {
  return (req, res, next) => {
    Promise.resolve(fn(req, res, next)).catch(next);
  };
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
app.get('/api/users/:id', asyncHandler(async (req, res) => {
  const user = await User.findById(req.params.id);
  
  if (!user) {
    throw new NotFoundError('User', req.params.id);
  }
  
  res.json(user);
}));
```

---

## üîπ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

#### ‚úç –ü—Ä–∏–º–µ—Ä —Å Winston:
```javascript
const winston = require('winston');

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
const logger = winston.createLogger({
  level: 'error',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log' }),
    new winston.transports.Console({
      format: winston.format.simple()
    })
  ]
});

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
  // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
  logger.error({
    message: err.message,
    stack: err.stack,
    statusCode: err.statusCode || 500,
    path: req.originalUrl,
    method: req.method,
    userAgent: req.get('User-Agent'),
    ip: req.ip,
    timestamp: new Date().toISOString()
  });
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É
  res.status(err.statusCode || 500).json({
    status: err.statusCode || 500,
    error: err.status || 'Internal Server Error',
    message: err.message,
    timestamp: new Date().toISOString(),
    path: req.originalUrl
  });
});
```

### 2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫**

#### ‚úç –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry:
```javascript
const Sentry = require('@sentry/node');

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sentry
Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV
});

// Middleware –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—à–∏–±–æ–∫ –≤ Sentry
app.use((err, req, res, next) => {
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É –≤ Sentry
  Sentry.captureException(err, {
    extra: {
      path: req.originalUrl,
      method: req.method,
      userAgent: req.get('User-Agent'),
      ip: req.ip
    }
  });
  
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –∫–∞–∫ –æ–±—ã—á–Ω–æ
  next(err);
});
```

---

## üîπ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### 1. **JavaScript fetch —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫**

#### ‚úç –ü—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞:
```javascript
class APIClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }
  
  async request(endpoint, options = {}) {
    try {
      const response = await fetch(`${this.baseURL}${endpoint}`, {
        headers: {
          'Content-Type': 'application/json',
          ...options.headers
        },
        ...options
      });
      
      const data = await response.json();
      
      if (!response.ok) {
        throw new APIError(
          data.message || 'API Error',
          response.status,
          data
        );
      }
      
      return data;
    } catch (error) {
      if (error instanceof APIError) {
        throw error;
      }
      
      throw new APIError(
        'Network error',
        0,
        { message: error.message }
      );
    }
  }
  
  async getUser(id) {
    return this.request(`/api/users/${id}`);
  }
  
  async createUser(userData) {
    return this.request('/api/users', {
      method: 'POST',
      body: JSON.stringify(userData)
    });
  }
}

// –ö–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ API –æ—à–∏–±–æ–∫
class APIError extends Error {
  constructor(message, status, data) {
    super(message);
    this.status = status;
    this.data = data;
    this.name = 'APIError';
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const api = new APIClient('https://api.example.com');

try {
  const user = await api.getUser(123);
  console.log('User:', user);
} catch (error) {
  if (error instanceof APIError) {
    console.error('API Error:', error.status, error.message);
    
    if (error.status === 404) {
      console.log('User not found');
    } else if (error.status === 401) {
      console.log('Please login');
    }
  } else {
    console.error('Network error:', error.message);
  }
}
```

### 2. **React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

#### ‚úç –ü—Ä–∏–º–µ—Ä React —Ö—É–∫–∞:
```javascript
import { useState, useEffect } from 'react';

const useAPI = (url) => {
  const [data, setData] = useState(null);
  const [error, setError] = useState(null);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        setError(null);
        
        const response = await fetch(url);
        const result = await response.json();
        
        if (!response.ok) {
          throw new Error(result.message || 'API Error');
        }
        
        setData(result);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };
    
    fetchData();
  }, [url]);
  
  return { data, error, loading };
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const UserProfile = ({ userId }) => {
  const { data: user, error, loading } = useAPI(`/api/users/${userId}`);
  
  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error}</div>;
  if (!user) return <div>User not found</div>;
  
  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.email}</p>
    </div>
  );
};
```

---

## üîπ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

#### 1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—à–∏–±–æ–∫ –≤–æ –≤—Å—ë–º API
- –°–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º
- –û–±–µ—Å–ø–µ—á—å—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

#### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

#### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö
- –û–±—ä—è—Å–Ω–∏—Ç–µ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

#### 4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ—à–∏–±–æ–∫

---

## üéØ –ò—Ç–æ–≥

- **HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã** ‚Äî –æ—Å–Ω–æ–≤–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ REST
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã** ‚Äî –ø–æ–º–æ–≥–∞—é—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º API

## üèÜ –ó–ê–î–ê–ß–ò

–ó–∞–¥–∞—á–∏ –ø–æ —Ç–µ–º–µ `–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ REST API`:

---

### üìå –ó–∞–¥–∞—á–∞ 1: HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
–ö–∞–∫–∏–µ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—à–∏–±–æ–∫ –≤ REST API?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

**–û—Ç–≤–µ—Ç:**
- 400 Bad Request ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- 401 Unauthorized ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- 403 Forbidden ‚Äî –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- 404 Not Found ‚Äî —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- 409 Conflict ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- 500 Internal Server Error ‚Äî –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏
–ö–∞–∫ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```json
{
  "status": 404,
  "error": "Not Found",
  "message": "User with id 123 not found",
  "timestamp": "2023-10-01T12:00:00Z",
  "path": "/api/users/123"
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ REST API?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
app.post('/api/users', (req, res) => {
  const errors = validateUser(req.body);
  
  if (errors.length > 0) {
    return res.status(400).json({
      status: 400,
      error: 'Bad Request',
      message: 'Validation failed',
      errors: errors
    });
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
});
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 4: Middleware –¥–ª—è –æ—à–∏–±–æ–∫
–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ Express.js?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
app.use((err, req, res, next) => {
  console.error(err.stack);
  
  res.status(err.statusCode || 500).json({
    status: err.statusCode || 500,
    error: err.message || 'Internal Server Error',
    timestamp: new Date().toISOString(),
    path: req.originalUrl
  });
});
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 5: –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
class AppError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.statusCode = statusCode;
    this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';
  }
}

class NotFoundError extends AppError {
  constructor(resource, id) {
    super(`${resource} with id ${id} not found`, 404);
  }
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 6: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
async function fetchUser(id) {
  try {
    const response = await fetch(`/api/users/${id}`);
    const data = await response.json();
    
    if (!response.ok) {
      throw new Error(data.message || 'API Error');
    }
    
    return data;
  } catch (error) {
    console.error('Error:', error.message);
    throw error;
  }
}
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 7: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
const winston = require('winston');

const logger = winston.createLogger({
  level: 'error',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log' })
  ]
});

app.use((err, req, res, next) => {
  logger.error({
    message: err.message,
    stack: err.stack,
    path: req.originalUrl,
    timestamp: new Date().toISOString()
  });
  
  next(err);
});
```

</details>

---

### üìå –ó–∞–¥–∞—á–∞ 8: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫
–ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫?
<details>
<summary>‚úç –†–µ—à–µ–Ω–∏–µ</summary>

```javascript
app.use((err, req, res, next) => {
  const errorResponse = {
    status: err.statusCode || 500,
    error: err.status || 'Internal Server Error',
    message: err.message,
    timestamp: new Date().toISOString(),
    path: req.originalUrl
  };
  
  // –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º stack trace
  if (process.env.NODE_ENV === 'development') {
    errorResponse.stack = err.stack;
  }
  
  res.status(err.statusCode || 500).json(errorResponse);
});
```

</details>

---

üéâ –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–º–æ–≥—É—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ REST API!

--- 